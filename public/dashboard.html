<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <title>Tutor Dashboard</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

        <!-- GOOGLE FONTS -->
        <link href="https://fonts.googleapis.com/css?family=Karla:400,700|Roboto" rel="stylesheet">
        <link href="plugins/material/css/materialdesignicons.min.css" rel="stylesheet"/>
        <link href="plugins/simplebar/simplebar.css" rel="stylesheet"/>

        <!-- PLUGINS CSS STYLE -->
        <link href="plugins/nprogress/nprogress.css" rel="stylesheet" />
        <link href="plugins/DataTables/DataTables-1.10.18/css/jquery.dataTables.min.css" rel="stylesheet"/>
        <link href="plugins/jvectormap/jquery-jvectormap-2.0.3.css" rel="stylesheet"/>
        <link href="plugins/daterangepicker/daterangepicker.css" rel="stylesheet"/>
        <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
        <link href="plugins/toaster/toastr.min.css" rel="stylesheet"/>
        <link href="plugins/fullcalendar/core-4.3.1/main.min.css" rel="stylesheet">
        <link href="plugins/fullcalendar/daygrid-4.3.0/main.min.css" rel="stylesheet">

        <!-- MONO CSS -->
        <link id="main-css-href" rel="stylesheet" href="dashboard.css"/>

        <!-- FAVICON -->
        <!-- <link href="images/favicon.png" rel="shortcut icon"/> -->
        <script src="plugins/nprogress/nprogress.js"></script>
    </head>

    <body class="navbar-fixed sidebar-fixed" id="body">
        <div class="wrapper">
            <!-- Left Side -->
            <aside id="left-sidebar" class="left-sidebar sidebar-light">
                <div id="sidebar" class="sidebar sidebar-with-footer">
                    <!-- Top Navbar -->
                    <div class="app-brand">
                        <a>
                            <img src="images/favicon1.png">
                            <span class="brand-name">MMT Tutor</span>
                        </a>
                    </div>

                    <!-- Button Areas -->
                    <div class="sidebar-left" data-simplebar style="height: 100%;">
                        <ul class="nav sidebar-inner" id="sidebar-menu">
                            <li
                                id="mainDashboardButton" class="active"
                            >
                                <a class="sidenav-item-link" style="cursor: pointer;" onclick="menuNav('mainDashboardArea', 'mainDashboardButton', '')">
                                    <i class="mdi mdi-chart-line"></i>
                                    <span class="nav-text">Dashboard</span>
                                </a>
                            </li>
                        
                            <li
                                id="allSessionsButton"
                            >
                                <a class="sidenav-item-link" style="cursor: pointer;" onclick="menuNav('allSessionsDashboardArea', 'allSessionsButton', 'getAllSessions');">
                                    <i class="mdi mdi-card-text-outline"></i>
                                    <span class="nav-text">All Sessions</span>
                                </a>
                            </li putAdminButtonBelowHere>
                        </ul>
                    </div>
                </div>
            </aside>

            <!-- Right Side -->
            <div class="page-wrapper">
                <!-- Top Navbar -->
                <header class="main-header" id="header">
                    <nav id="navbar" class="navbar navbar-expand-lg navbar-light">
                        <!-- Hamburger Menu -->
                        <div class="navbar-left">
                            <button id="sidebar-toggler" class="sidebar-toggle">
                                <span class="sr-only">Toggle navigation</span>
                            </button>
                        </div>

                        <!-- Message Area -->
                        <div id="serverMessage" class="navbar-right">
                        </div>
                        
                        <!-- Profile Dropdown List -->
                        <div class="navbar-right">
                            <ul class="nav navbar-nav">
                                <li class="dropdown user-menu">
                                    <button class="dropdown-toggle nav-link" data-toggle="dropdown">
                                        <span id="hiText" class="d-lg-inline-block">First Last</span>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li>
                                            <a class="dropdown-link-item" style="cursor: pointer;" onclick="menuNav('profileArea', 'none', 'profileDashboardFunction')">
                                                <i class="mdi mdi-account"></i>
                                                <p>Profile</p>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="dropdown-link-item" style="cursor: pointer;" onclick="window.location.href = '/';">
                                                <i class="mdi mdi-logout"></i>
                                                <p>Log Out</p>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </header>

                <!-- Dashboard Areas -->
                <div class="content-wrapper">
                    <div class="content">
                        <div id="profileArea" style="display: none;">
                            <!-- Header Area -->
                            <div class="card card-default card-profile">
                                <div class="card-body card-profile-body mt-7">
                                    <div class="profile-avata">
                                        <!-- <img class="rounded-circle" src="images/user/user-md-01.jpg" alt="Avata Image"> -->
                                        <p id="userProfileName" class="h3 d-block mt-7 mb-2">First Last</p>
                                        <a id="userProfilePhone" class="d-block text-color">913-123-4567</a>
                                        <a id="userProfileEmail" class="d-block text-color">random@example.com</a>
                                    </div>
                                </div>
                            </div>

                            <!-- Body Area -->
                            <div class="row">
                                <!-- Settings list -->
                                <div class="col-xl-3">
                                    <div class="card card-default">                    
                                        <div class="card-body pt-0 mt-5">
                                            <ul class="nav nav-settings">
                                                <li class="nav-item">
                                                    <a id="profileInfoButton" class="nav-link active" style="cursor: pointer;" onclick="profileMenuNav('profileInfoButton', [0], 'profileDashboardFunction')">
                                                        <i class="mdi mdi-information-outline mr-1"></i> Info
                                                    </a>
                                                </li>
                                                <li class="nav-item">
                                                    <a id="profileButton" class="nav-link" style="cursor: pointer;" onclick="profileMenuNav('profileButton', [2], 'profileFunction')">
                                                        <i class="mdi mdi-account-outline mr-1"></i> Profile
                                                    </a>
                                                </li>
                                                <li class="nav-item">
                                                    <a id="profileAccountButton" class="nav-link" style="cursor: pointer;" onclick="profileMenuNav('profileAccountButton', [3], '')">
                                                        <i class="mdi mdi-settings-outline mr-1"></i> Account
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Settings Forms -->
                                <div id="profileBodyArea" class="col-xl-9">
                                    <!-- Profile Stats -->
                                    <div>
                                        <div class="row">
                                            <div class="col-xl-4 col-md-6">
                                                <div class="card card-default">
                                                <div class="d-flex p-5 align-items-center flex-column">
                                                    <div class="icon-md bg-success rounded-circle mb-2">
                                                    <i class="mdi mdi-coin"></i>
                                                    </div>
                                                    <div class="text-center">
                                                    <span id="careerMoneyMadeTotal" class="h2 d-block">$0</span>
                                                    <p>Total Revenue</p>
                                                    </div>
                                                </div>
                                                </div>
                                            </div>
            
                                            <div class="col-xl-4 col-md-6">
                                                <div class="card card-default">
                                                <div class="d-flex p-5 align-items-center flex-column">
                                                    <div class="icon-md bg-info rounded-circle mb-2">
                                                    <i class="mdi mdi-counter"></i>
                                                    </div>
                                                    <div class="text-center">
                                                    <span id="careerStudentsTaughtTotal" class="h2 d-block">0</span>
                                                    <p>Total Classes Taught</p>
                                                    </div>
                                                </div>
                                                </div>
                                            </div>
            
                                            <div class="col-xl-4 col-md-6">
                                                <div class="card card-default">
                                                <div class="d-flex p-5 align-items-center flex-column">
                                                    <div class="icon-md bg-secondary rounded-circle mb-2">
                                                    <i class="mdi mdi-account-clock-outline"></i>
                                                    </div>
                                                    <div class="text-center">
                                                    <span id="careerHoursTaughtTotal" class="h2 d-block">0</span>
                                                    <p>Total Hours Taught</p>
                                                    </div>
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Update Profile Pic -->
                                    <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6" style="display: none;">
                                        <form>
                                            <div class="row">
                                                <div class="col-xl-10">
                                                    <div class="form-group row">
                                                        <div class="col-sm-8 col-lg-10">
                                                            <div class="custom-file mb-1">
                                                                <input type="file" class="custom-file-input" id="coverImage" required="">
                                                                <label class="custom-file-label" for="coverImage">Choose jpg file</label>
                                                                <div class="invalid-feedback">Example invalid custom file feedback</div>
                                                            </div>
                                                            <span class="d-block ">Upload a new profile picture</span>
                                                        </div>
                                                    </div>
                                                </div>
                                        
                                                <div class="col-xl-2">
                                                    <button type="submit" class="btn btn-primary">Update</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>

                                    <!-- Update Profile Info -->
                                    <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6" style="display: none;">
                                        <div class="d-flex justify-content-between">
                                            <h2 class="text-dark font-weight-medium">Update Profile</h2>
                                        </div>
                                        <form id="updateUserProfileForm" class="mt-3" onsubmit="return updateUserProfile()">
                                            <div class="form-row mt-3">
                                                <input id="userProfileFormFirstName" name="FirstName" placeholder="First Name" class="form-control" type="text">
                                            </div>
                                            <div class="form-row mt-3">
                                                <input id="userProfileFormLastName" name="LastName" placeholder="Last Name" class="form-control" required type="text">
                                            </div>
                                            <div class="form-row mt-3">
                                                <input id="userProfileFormPhone" name="Phone" placeholder="123-456-7890" class="form-control" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">
                                            </div>
                                            <div class="form-footer mt-6 text-center">
                                                <button type="submit" class="btn btn-primary">Update</button>
                                            </div>
                                        </form>
                                    </div>

                                    <!-- Update Password -->
                                    <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6" style="display: none;">
                                        <div class="d-flex justify-content-between">
                                            <h2 class="text-dark font-weight-medium">Update Password</h2>
                                        </div>
                                        <form id="updatePasswordForm" class="mt-3" onsubmit="return updatePassword()">
                                            <div class="form-row mt-3">
                                                <input name="OldPassword" placeholder="Old Password" class="form-control" required type="text">
                                            </div>
                                            <div class="form-row mt-3">
                                                <input name="NewPassword" placeholder="New Password" class="form-control" required type="text">
                                            </div>
                                            <div class="form-row mt-3">
                                                <input name="NewPasswordAgain" placeholder="New Password Again" class="form-control" required type="text">
                                            </div>
                                            <div class="form-footer mt-6 text-center">
                                                <button type="submit" class="btn btn-primary">Update</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="mainDashboardArea">
                            <!-- Top Statistics -->
                            <div class="row">
                                <div class="col-xl-4 col-sm-6">
                                    <div class="card card-default card-mini">
                                        <div class="card-header">
                                            <h2 id="moneyEarned">$0</h2>
                                            <div id="moneyEarnedSummary" class="sub-title mb-4" data-html="true" data-toggle="tooltip" data-placement="bottom"
                                                title="">
                                                Week's Total Earnings
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="chart-wrapper">
                                                <div>
                                                    <div id="moneyChartArea"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-sm-6">
                                    <div class="card card-default card-mini">
                                    <div class="card-header">
                                        <h2 id="studentsTutored">0</h2>
                                        <div id="studentsTutoredSummary" class="sub-title mb-4" data-html="true" data-toggle="tooltip" data-placement="bottom"
                                            title="">
                                            Week's Total Classes
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-wrapper">
                                        <div>
                                            <div id="studentsChartArea"></div>
                                        </div>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-sm-6">
                                    <div class="card card-default card-mini">
                                    <div class="card-header">
                                        <h2 id="hoursTutored">0</h2>
                                        <div id="hoursTutoredSummary" class="sub-title mb-4" data-html="true" data-toggle="tooltip" data-placement="bottom"
                                            title="">
                                            Week's Total Hours
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="chart-wrapper">
                                        <div>
                                            <div id="hoursChartArea"></div>
                                        </div>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Calendar Table -->
                            <div class="row">
                                <div class="col-12">
                                    <div class="card card-default">
                                        <div class="card-body">
                                            <div id="calendarArea"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="allSessionsDashboardArea" style="display: none;">
                            <div class="rounded bg-white py-5 px-3 px-md-4 px-lg-5 mb-6">
                                <!-- Size Dropdown -->
                                <div class="row justify-content-between px-3 px-md-4">
                                    <h2></h2>
                                    <div class="dropdown">
                                      <p class="dropdown-toggle" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Viewing last
                                      </p>
            
                                      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink" x-placement="bottom-end" style="position: absolute; transform: translate3d(97px, 20px, 0px); top: 0px; left: 0px; will-change: transform;">
                                        <p class="dropdown-item" onclick="getAllSessions()">Get last 25</p>
                                        <p class="dropdown-item" onclick="getAllSessions(50)">Get last 50</p>
                                        <p class="dropdown-item" onclick="getAllSessions(100)">Get last 100</p>
                                        <p class="dropdown-item" onclick="getAllSessions(-1)">Get all sessions</p>
                                      </div>
                                    </div>
                                </div>
                                
                                <!-- Hour Table -->
                                <div class="table-responsive">
                                    <table id="sessionsTable" class="table table-hover table-product">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Student</th>
                                                <th>Class</th>
                                                <th>Start Time</th>
                                                <th>End Time</th>
                                                <th>Price</th>
                                                <th>Class Notes</th>
                                            </tr>
                                        </thead>
                                        <tbody id="hoursTableBody"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div id="adminDashboardArea" style="display: none;">
                            <div class="row">
                                <!-- Admin List -->
                                <div class="col-xl-3">
                                    <div class="card card-default">
                                        <div class="card-body pt-0 mt-5">
                                            <ul class="nav nav-settings">
                                                <li class="nav-item">
                                                    <a id="adminInfoButton" class="nav-link active" style="cursor: pointer;" onclick="adminMenuNav('adminInfoButton', [0], 'adminDashboardFunction')">
                                                        <i class="mdi mdi-information-outline mr-1"></i> Info
                                                    </a>
                                                </li>
                                                <li class="nav-item">
                                                    <li class="nav-item">
                                                        <a id="adminAddButton" class="nav-link" style="cursor: pointer;" onclick="adminMenuNav('adminAddButton', [3, 4, 5, 6], 'adminAddFunction')">
                                                            <i class="mdi mdi-account-plus mr-1"></i> Add
                                                        </a>
                                                </li>
                                                <li class="nav-item"></li>
                                                    <a id="adminTutorsButton" class="nav-link" style="cursor: pointer;" onclick="adminMenuNav('adminTutorsButton', [1], 'adminTutorsFunction')">
                                                        <i class="mdi mdi-account-supervisor mr-1"></i> Tutors
                                                    </a>
                                                </li>
                                                <li class="nav-item">
                                                    <a id="adminStudentsButton" class="nav-link" style="cursor: pointer;" onclick="adminMenuNav('adminStudentsButton', [2], 'adminStudentsFunction')">
                                                        <i class="mdi mdi-account-group mr-1"></i> Students
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Admin Areas -->
                                <div id="adminBodyArea" class="col-xl-9">
                                    <!-- Company Stats -->
                                    <div>
                                        <div class="row">
                                            <div class="col-xl-4 col-md-6">
                                                <div class="card card-default">
                                                <div class="d-flex p-5 align-items-center flex-column">
                                                    <div class="icon-md bg-success rounded-circle mb-2">
                                                    <i class="mdi mdi-coin"></i>
                                                    </div>
                                                    <div class="text-center">
                                                    <span id="companyMoneyMadeTotal" class="h2 d-block">$0</span>
                                                    <p>Total Revenue</p>
                                                    </div>
                                                </div>
                                                </div>
                                            </div>
            
                                            <div class="col-xl-4 col-md-6">
                                                <div class="card card-default">
                                                <div class="d-flex p-5 align-items-center flex-column">
                                                    <div class="icon-md bg-info rounded-circle mb-2">
                                                    <i class="mdi mdi-counter"></i>
                                                    </div>
                                                    <div class="text-center">
                                                    <span id="companyStudentsTaughtTotal" class="h2 d-block">0</span>
                                                    <p>Total Classes Taught</p>
                                                    </div>
                                                </div>
                                                </div>
                                            </div>
            
                                            <div class="col-xl-4 col-md-6">
                                                <div class="card card-default">
                                                <div class="d-flex p-5 align-items-center flex-column">
                                                    <div class="icon-md bg-secondary rounded-circle mb-2">
                                                    <i class="mdi mdi-account-clock-outline"></i>
                                                    </div>
                                                    <div class="text-center">
                                                    <span id="companyHoursTaughtTotal" class="h2 d-block">0</span>
                                                    <p>Total Hours Taught</p>
                                                    </div>
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Tutors Carousel -->
                                    <div class="card card-default" style="display: none;">
                                        <div id="adminTutorsCarousel" class="row" style="width: 90%; margin-left: 5%;">
                                            <div class="col-lg-6 col-xl-4 col-xxl-3">
                                                <div class="card card-default mt-7">
                                                    <div class="card-body text-center">
                                                        <!-- Name & Profile Pic -->
                                                        <a class="d-block mb-2">
                                                            <div class="image mb-3 d-inline-flex mt-n8">
                                                                <!-- <img src="images/user/user-md-2.jpg" class="img-fluid rounded-circle d-inline-block" alt=""> -->
                                                            </div>
                                                            <h3 id="tutorCarousel0First" class="student-tags">First</h3>
                                                            <h3 id="tutorCarousel0Last" class="student-tags">Last</h3>
                                                            <p id="tutorCarousel0Phone" class="mt-3 text-smoke student-tags">913-123-4567</p>
                                                            <p id="tutorCarousel0Email" class="mb-3 text-smoke student-tags">tutor@gmail.com</p>
                                                        </a>
                                                
                                                        <!-- Icons -->
                                                        <div class="row justify-content-center">
                                                            <div class="col-4">
                                                                <i class="mdi mdi-account-edit mdi-24px mdi-hover" style="cursor: pointer;"
                                                                onclick="openTutorModal(0)"></i>
                                                            </div>
                                                            <div class="col-4">
                                                                <i class="mdi mdi-coin mdi-24px mdi-hover" style="cursor: pointer;"
                                                                onclick="openTutorInvoiceModal(0)"></i>
                                                            </div>
                                                            <div class="col-4">
                                                                <i class="mdi mdi-file-document mdi-24px mdi-hover" style="cursor: pointer;"
                                                                onclick="openContractModal(0)"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <a id="refress-button" href="javascript:" class="btn mdi mdi-cached btn-refress"></a> -->
                                    </div>

                                    <!-- Student Carousel -->
                                    <div class="card card-default" style="display: none;">
                                        <div id="adminStudentsCarousel" class="row" style="width: 90%; margin-left: 5%;">
                                            <div class="col-lg-6 col-xl-4 col-xxl-3">
                                                <div class="card card-default mt-7">
                                                    <div class="card-body text-center">
                                                        <!-- Name & Profile Pic -->
                                                        <a class="d-block mb-2">
                                                            <div class="image mb-3 d-inline-flex mt-n8">
                                                                <!-- <img src="images/user/user-md-2.jpg" class="img-fluid rounded-circle d-inline-block" alt=""> -->
                                                            </div>
                                                            <h3 id="studentCarousel0First" class="student-tags">First</h3>
                                                            <h3 id="studentCarousel0Last" class="student-tags">Last</h3>
                                                            <p id="studentCarousel0Phone" class="mt-3 text-smoke student-tags">913-123-4567</p>
                                                            <p id="studentCarousel0Email" class="mb-3 text-smoke student-tags">student@gmail.com</p>
                                                        </a>
                                                
                                                        <!-- Icons -->
                                                        <div class="row justify-content-center">
                                                            <div class="col-4">
                                                                <i class="mdi mdi-account-edit mdi-24px mdi-hover" style="cursor: pointer;"
                                                                onclick="openStudentModal(0)"></i>
                                                            </div>
                                                            <div class="col-4">
                                                                <i class="mdi mdi-coin mdi-24px mdi-hover" style="cursor: pointer;"
                                                                onclick="openStudentInvoiceModal(0)"></i>
                                                            </div>
                                                            <div class="col-4">
                                                                <i class="mdi mdi-file-document mdi-24px mdi-hover" style="cursor: pointer;"
                                                                onclick="openContractModal(0)"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <a id="refress-button" href="javascript:" class="btn mdi mdi-cached btn-refress"></a> -->
                                    </div>

                                    <!-- Add Areas -->
                                    <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6" style="display: none;">
                                        <form id="addAdminSessionForm" onsubmit="return addAdminSession()">
                                            <div class="form-row">
                                                <div class="col-4 form-group">
                                                    <label>Tutor</label>
                                                    <select id="addAdminSessionTutorsDropdown" name="Tutor" class="form-control" required>
                                                        <option value="" disabled selected></option>
                                                    </select>
                                                </div>
                                                <div class="col-4 form-group">
                                                    <label>Student</label>
                                                    <select id="addAdminSessionStudentsDropdown" name="Student" class="form-control" required>
                                                        <option value="" disabled selected></option>
                                                    </select>
                                                </div>
                                                <div class="col-4 form-group">
                                                    <label>Class</label>
                                                    <select id="addAdminSessionClassesDropdown" name="Class" class="form-control" required>
                                                        <option value="" disabled selected></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="col-4 form-group">
                                                    <label>Date</label>
                                                    <input id="addAdminSessionDateTutored" name="Date" required class="form-control" type="date">
                                                </div>
                                                <div class="col-4 form-group">
                                                    <label>Start Time</label>
                                                    <input id="startTimePicker" name="startTime" class="form-control" required type="time">
                                                </div>
                                                <div class="col-4 form-group">
                                                    <label>End Time</label>
                                                    <input id="endTimePicker" name="endTime" class="form-control" required type="time">
                                                </div>
                                            </div>
                                            <label>Notes</label>
                                            <textarea name="Notes" placeholder="Description" class="form-control" required type="text" maxlength="500" style="height: 150px; resize: none;"></textarea>
                                            <div class="form-footer mt-6 text-center">
                                                <button type="submit" class="btn btn-primary">Add Session</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6" style="display: none;">
                                        <div class="d-flex justify-content-between">
                                            <h2 class="text-dark font-weight-medium">Add Tutor</h2>
                                        </div>
                                        <form id="addTutorForm" class="mt-3" onsubmit="return addTutor()">
                                            <div class="form-row">
                                                <div class="col-6">
                                                    <input name="FirstName" placeholder="Tutor First Name" class="form-control" required type="text">
                                                </div>
                                                <div class="col-6">
                                                    <input name="LastName" placeholder="Tutor Last Name" class="form-control" required type="text">
                                                </div>
                                            </div>
                                            <div class="form-row mt-3">
                                                <div class="col-4">
                                                    <input name="Email" placeholder="Tutor Email" class="form-control" required type="email">
                                                </div>
                                                <div class="col-4">
                                                    <input name="Phone" placeholder="123-456-7890" class="form-control" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">
                                                </div>
                                                <div class="col-4">
                                                    <input name="Percentage" placeholder="Tutor Percentage (Ex. 80 for 80%)" pattern="[0-9]+" class="form-control" required>
                                                </div>
                                            </div>

                                            <div class="form-footer mt-6 text-center">
                                                <button type="submit" class="btn btn-primary">Add Tutor</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6" style="display: none;">
                                        <div class="d-flex justify-content-between">
                                            <h2 class="text-dark font-weight-medium">Add Student</h2>
                                        </div>
                                        <form id="addStudentForm" class="mt-3" onsubmit="return addStudent()">
                                            <div class="form-row mt-3">
                                                <div class="col-6">
                                                    <input name="FirstName" placeholder="Student First Name" class="form-control" required type="text">
                                                </div>
                                                <div class="col-6">
                                                    <input name="LastName" placeholder="Student Last Name" class="form-control" required type="text">
                                                </div>
                                            </div>
                                            <div class="form-row mt-3">
                                                <div class="col-6">
                                                    <input name="Email" placeholder="Student Email" class="form-control" required type="email">
                                                </div>
                                                <div class="col-6">
                                                    <input name="Price" placeholder="Student Price (Ex. 50)" class="form-control" required pattern="[0-9]*[.,]?[0-9]*" type="text">
                                                </div>
                                            </div>
                                            <div class="form-row mt-3">
                                                <div class="col-6">
                                                    <input id="birthday" name="Birthday" type="date" class="form-control" required>  
                                                </div>
                                                <div class="col-6">
                                                    <input name="PhoneNumber" placeholder="123-456-7890" class="form-control" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">  
                                                </div>
                                            </div>
                                            <div class="form-footer mt-6 text-center">
                                                <button type="submit" class="btn btn-primary">Add Student</button>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6" style="display: none;">
                                        <div class="d-flex justify-content-between">
                                            <h2 class="text-dark font-weight-medium">Add Class</h2>
                                        </div>
                                        <form id="addClassForm" class="mt-3" onsubmit="return addClass()">
                                            <div class="form-row">
                                                <div class="col-6">
                                                    <input name="Name" placeholder="Class Name" class="form-control" required type="text">
                                                </div>
                                                <div class="col-6">
                                                    <select name="Level" placeholder="Class Level" class="form-control" required>
                                                        <option value="" disabled selected>Select class level</option>
                                                        <option value="preK">preK</option>
                                                        <option value="K-5">K-5</option>
                                                        <option value="6-8">6-8</option>
                                                        <option value="9-12">9-12</option>
                                                        <option value="Higher">Higher</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-footer mt-6 text-center">
                                                <button type="submit" class="btn btn-primary">Add</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Areas -->
            <div class="modal fade" id="editSessionModal" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <form id="editSessionModalForm" onsubmit="return updateEvent();">
                                <div class="form-row">
                                    <div class="col-6 form-group">
                                        <label>Student</label>
                                        <select id="editSessionStudentsModalDropdown" name="Student" class="form-control" required>
                                            <option value="" disabled selected></option>
                                        </select>
                                    </div>
                                    <div class="col-6 form-group">
                                        <label>Class</label>
                                        <select id="editSessionClassesModalDropdown" name="Class" class="form-control" required>
                                            <option value="" disabled selected></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-4 form-group">
                                        <label>Date</label>
                                        <input id="editSessionModalDateTutored" name="Date" required class="form-control" type="date">
                                    </div>
                                    <div class="col-4 form-group">
                                        <label>Start Time</label>
                                        <input id="startTimeModalPicker" name="startTime" class="form-control" required type="time">
                                    </div>
                                    <div class="col-4 form-group">
                                        <label>End Time</label>
                                        <input id="endTimeModalPicker" name="endTime" class="form-control" required type="time">
                                    </div>
                                </div>
                                <label>Notes</label>
                                <textarea id="notesModalBox" name="Notes" placeholder="Description" class="form-control" required type="text" maxlength="500" style="height: 150px; resize: none;"></textarea>
                                <div class="form-footer mt-5 text-right">
                                    <button id="modalDeleteButton" type="button" class="btn btn-danger" onclick="eventDeleteConfirm()">Delete</button>
                                    <button type="submit" class="btn btn-success">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="addSessionModal" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <form id="addSessionModalForm" onsubmit="return addSession();">
                                <div class="form-row">
                                    <div class="col-6 form-group">
                                        <label>Student</label>
                                        <select id="addSessionStudentsModalDropdown" name="Student" class="form-control" required>
                                            <option value="" disabled selected></option>
                                        </select>
                                    </div>
                                    <div class="col-6 form-group">
                                        <label>Class</label>
                                        <select id="addSessionClassesModalDropdown" name="Class" class="form-control" required>
                                            <option value="" disabled selected></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-4 form-group">
                                        <label>Date</label>
                                        <input id="addSessionModalDateTutored" name="Date" required class="form-control" type="date">
                                    </div>
                                    <div class="col-4 form-group">
                                        <label>Start Time</label>
                                        <input id="addSessionModalStartTime" name="startTime" class="form-control" required type="time">
                                    </div>
                                    <div class="col-4 form-group">
                                        <label>End Time</label>
                                        <input id="addSessionModalEndTime" name="endTime" class="form-control" required type="time">
                                    </div>
                                </div>
                                <label>Notes</label>
                                <textarea id="addSessionModalNotes" name="Notes" placeholder="Description" class="form-control" required type="text" maxlength="500" style="height: 150px; resize: none;"></textarea>
                                <div class="form-footer mt-5 text-right">
                                    <button type="submit" class="btn btn-primary">Add Session</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="editStudentModal" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Edit Student</h5>
                        </div>
                        <div class="modal-body">
                            <form id="updateStudentForm" class="mt-3" onsubmit="return updateStudent()">
                                <div class="form-row mt-3">
                                    <div class="col-6">
                                        <input id="editStudentFirstName" name="FirstName" placeholder="Student First Name" class="form-control" required type="text">
                                    </div>
                                    <div class="col-6">
                                        <input id="editStudentLastName" name="LastName" placeholder="Student Last Name" class="form-control" required type="text">
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="col-6">
                                        <input id="editStudentEmail" name="Email" placeholder="Student Email" class="form-control" required type="email">
                                    </div>
                                    <div class="col-6">
                                        <input id="editStudentPrice" name="Price" placeholder="Student Price (Ex. 50)" class="form-control" required pattern="[0-9]*[.,]?[0-9]*" type="text">
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="col-6">
                                        <input id="editStudentBirthday" name="Birthday" type="date" class="form-control" required>  
                                    </div>
                                    <div class="col-6">
                                        <input id="editStudentPhone" name="PhoneNumber" placeholder="123-456-7890" class="form-control" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">  
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer mt-3 text-center">
                            <button type="submit" form="updateStudentForm" class="btn btn-success">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="editTutorModal" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Edit Tutor</h5>
                        </div>
                        <div class="modal-body">
                            <form id="updateTutorForm" class="mt-3" onsubmit="return updateTutor()">
                                <div class="form-row mt-3">
                                    <div class="col-6">
                                        <input id="editTutorFirstName" name="FirstName" placeholder="Tutor First Name" class="form-control" required type="text">
                                    </div>
                                    <div class="col-6">
                                        <input id="editTutorLastName" name="LastName" placeholder="Tutor Last Name" class="form-control" required type="text">
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="col-6">
                                        <input id="editTutorEmail" name="Email" placeholder="Tutor Email" class="form-control" required type="email">
                                    </div>
                                    <div class="col-6">
                                        <input id="editTutorPercentage" name="Percentage" placeholder="Tutor Percentage (Ex. 80 for 80%)" pattern="[0-9]+" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="col-6">
                                        <input id="editTutorBirthday" name="Birthday" type="date" class="form-control" disabled>  
                                    </div>
                                    <div class="col-6">
                                        <input id="editTutorPhone" name="PhoneNumber" placeholder="123-456-7890" class="form-control" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">  
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer mt-3 text-center">
                            <button type="submit" form="updateTutorForm" class="btn btn-success">Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="viewInvoiceModal" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div class="rounded bg-white mb-6">
                                <!-- Invoice Form -->
                                <div class="d-flex justify-content-between">
                                    <div class="rounded bg-white">
                                        <form id="getInvoiceForm" class="mt-3 make-hidden">
                                            <div class="form-row">
                                                <div class="col-4 form-group">
                                                    <label>Start Date</label>
                                                    <input id="invoiceStartDate" name="startDate" class="form-control" required type="date">
                                                </div>
                                                <div class="col-4 form-group">
                                                    <label>End Date</label>
                                                    <input id="invoiceEndDate" name="endDate" class="form-control" required type="date">
                                                </div>
                                                <div class="col-4 form-group">
                                                    <label>Get Invoice</label>
                                                    <button type="submit" class="btn btn-primary form-control">Get</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <i class="mdi mdi-settings-outline mdi-18px mdi-hover" style="cursor: pointer;" onclick="document.getElementById('getInvoiceForm').classList.toggle('make-hidden')"></i>
                                </div>

                                <!-- Invoice Id -->
                                <div>
                                    <h3 id="modalInvoiceFullName" class="text-dark"></h3>
                                    <p id="modalInvoicePhone">Phone:</p>
                                    <p id="modalInvoiceEmail">Email:</p>
                                </div>

                                <!-- Invoice Table -->
                                <div class="table-responsive" style="height: 250px; overflow-y: auto;">
                                    <table id="invoiceTable" class="table mt-3 table-striped" style="height: 90%;">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Date</th>
                                                <th>Item</th>
                                                <th>Start</th>
                                                <th>End</th>
                                                <th>Price</th>
                                            </tr>
                                        </thead>
                                        <tbody id="invoiceTableBody"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="editContractModal" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <!-- Upload pdf -->
                            <div class="rounded border bg-white py-5 px-3 px-md-4 px-lg-5 mb-6">
                                <div class="row justify-content-end">
                                    <i class="mdi mdi-settings-outline mdi-18px mdi-hover" style="cursor: pointer;" onclick="document.getElementById('updateContractForm').classList.toggle('make-hidden')"></i>
                                </div>
                                <form id="updateContractForm" class="mt-3 make-hidden" onsubmit="return updateContract()">
                                    <div class="row">
                                        <div>
                                            <div class="form-group row">
                                                <div class="ml-5 mr-5">
                                                    <div class="custom-file mb-1">
                                                        <input type="file" class="custom-file-input" id="coverImage" required="">
                                                        <label class="custom-file-label" for="coverImage">Upload new contract</label>
                                                        <div class="invalid-feedback">Example invalid custom file feedback</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                
                                        <div>
                                            <button type="submit" class="btn btn-primary">Update</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
  

    <script src="plugins/jquery/jquery.min.js"></script>
    <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="plugins/simplebar/simplebar.min.js"></script>
    <!-- <script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script> -->
    <script src="plugins/apexcharts/apexcharts.js"></script>
    <script src="plugins/DataTables/DataTables-1.10.18/js/jquery.dataTables.min.js"></script>                  
    <!-- <script src="plugins/jvectormap/jquery-jvectormap-2.0.3.min.js"></script>
    <script src="plugins/jvectormap/jquery-jvectormap-world-mill.js"></script>
    <script src="plugins/jvectormap/jquery-jvectormap-us-aea.js"></script> -->
    <!-- <script src="plugins/daterangepicker/moment.min.js"></script> -->
    <!-- <script src="plugins/daterangepicker/daterangepicker.js"></script> -->
    <!-- <script>
        jQuery(document).ready(function() {
            jQuery('input[name="dateRange"]').daterangepicker({
            autoUpdateInput: false,
            singleDatePicker: true,
            locale: {
            cancelLabel: 'Clear'
            }
        });
            jQuery('input[name="dateRange"]').on('apply.daterangepicker', function (ev, picker) {
            jQuery(this).val(picker.startDate.format('MM/DD/YYYY'));
            });
            jQuery('input[name="dateRange"]').on('cancel.daterangepicker', function (ev, picker) {
            jQuery(this).val('');
            });
        });
    </script> -->
    <!-- <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script> -->
    <script src="plugins/fullcalendar/core-4.3.1/main.min.js"></script>
    <script src="plugins/fullcalendar/daygrid-4.3.0/main.min.js"></script>
    <script src="plugins/toaster/toastr.min.js"></script>
    <script src="js/mono.js"></script>
    <script src="js/custom.js"></script>

    <script>
        // Init stuff
        var tutorData = [];
        var currentEvent = [];
        var currentAdminTutorId = 0;
        var currentAdminStudentId = 0;
        var adminInvoiceTableEmpty = 1;
        var asyncFunctionTimeout = 200;
        var sessionsTable = $("#sessionsTable");
        var currentDashboard = "mainDashboardArea";
        var currentAdminButton = "adminInfoButton";
        var currentProfileButton = "profileInfoButton";
        var currentDashboardButton = "mainDashboardButton";
        var tutorModal = new bootstrap.Modal(document.getElementById("editTutorModal"));
        var eventModal = new bootstrap.Modal(document.getElementById("editSessionModal"));
        var sessionModal = new bootstrap.Modal(document.getElementById("addSessionModal"));
        var studentModal = new bootstrap.Modal(document.getElementById("editStudentModal"));
        var invoiceModal = new bootstrap.Modal(document.getElementById("viewInvoiceModal"));
        var contractModal = new bootstrap.Modal(document.getElementById("editContractModal"));

        // Sessions table
        sessionsTable.DataTable(
        {
            info: true,
            autoWidth: false,
            lengthChange: false,
            lengthMenu: [[5, 10, 15, "All"]],
            //   scrollX: true,
            order: [[0, "desc"]],
            columnDefs: 
            [
                {
                    targets: "_all",
                    orderable: false
                },
            ],
            language: {search: "_INPUT_", searchPlaceholder: "Search..."},
        });

        // Dashboard Calendar
        var calendarArea = document.getElementById('calendarArea');
        var weekCalendar = new FullCalendar.Calendar(calendarArea,
        {
            firstDay: 1,
            height: 275,
            plugins: ['dayGrid'],
            defaultView: 'dayGridWeek',
            dayClick: function(date, jsEvent, view)
            {
                alert('Clicked on: ' + date.format());
            },
            eventClick: function(eventWrapper)
            {
                // Get current event
                currentEvent = eventWrapper.event;

                // Change delete back
                document.getElementById("modalDeleteButton").innerHTML = "Delete";
                document.getElementById("modalDeleteButton").onclick = eventDeleteConfirm;

                // Set things in modal
                document.getElementById("editSessionModalDateTutored").value = currentEvent._def.extendedProps["Date"];
                document.getElementById("startTimeModalPicker").value = currentEvent._def.extendedProps["StartTime"];
                document.getElementById("endTimeModalPicker").value = currentEvent._def.extendedProps["EndTime"];
                document.getElementById("notesModalBox").value = currentEvent._def.extendedProps["Notes"];

                // Clear dropdowns
                document.getElementById("editSessionStudentsModalDropdown").innerHTML = `<option value="" disabled selected></option>`;
                document.getElementById("editSessionClassesModalDropdown").innerHTML = `<option value="" disabled selected></option>`;

                // Open modal
                eventModal.show();

                // Get dropdowns
                setTimeout(function()
                {
                    // Get students dropdown
                    request = new XMLHttpRequest();
                    request.open("POST", "getStudents", false);
                    request.setRequestHeader('Content-type', 'application/json');
                    request.onreadystatechange = function()
                    {
                        // Successful response
                        if (this.readyState == 4 && this.status == 200) 
                        {
                            // Get students as list
                            studentsInfo = JSON.parse(this.responseText);

                            for (let i = 0; i < studentsInfo.length; i++)
                            {
                                // Get student
                                sInfo = studentsInfo[i];

                                // Add student to dropdowns
                                document.getElementById("editSessionStudentsModalDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));

                                // If id matches set to index and stop searching
                                if (sInfo["Id"] == currentEvent._def.extendedProps["StudentId"])
                                {
                                    currentEvent.setExtendedProp("StudentPrice", sInfo["Price"])
                                    document.getElementById("editSessionStudentsModalDropdown").options.selectedIndex = i + 1;
                                }
                            }
                        }
                    };
                    request.send(JSON.stringify());

                    // Get classes dropdown
                    request = new XMLHttpRequest();
                    request.open("POST", "getClasses", false);
                    request.setRequestHeader('Content-type', 'application/json');
                    request.onreadystatechange = function()
                    {
                        // Successful response
                        if (this.readyState == 4 && this.status == 200) 
                        {
                            classesInfo = JSON.parse(this.responseText);
                            for (let i = 0; i < classesInfo.length; i++)
                            {
                                cInfo = classesInfo[i];
                                document.getElementById("editSessionClassesModalDropdown").options.add(new Option(cInfo["Name"] + " (" + cInfo["Level"] + ")", JSON.stringify(cInfo)));

                                // If id matches set to index and stop searching
                                if (cInfo["Id"] == currentEvent._def.extendedProps["ClassId"])
                                {
                                    document.getElementById("editSessionClassesModalDropdown").options.selectedIndex = i + 1;
                                }
                            }
                        }
                    };
                    request.send(JSON.stringify());
                }, asyncFunctionTimeout)
            },
            validRange: function(nowDate)
            {
                // Get next monday
                var today = new Date();
                today.setDate(today.getDate() - today.getDay() + (today.getDay() == 0 ? -6:1));
                today.setDate(today.getDate() + 7);
                var day = String(today.getDate()).padStart(2, '0');
                var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
                var year = today.getFullYear();

                // Return
                return {
                    end: `${year}-${month}-${day}`
                };
            },
            customButtons:
            {
                prev: {
                    text: 'Prev',
                    click: function()
                    {
                        weekCalendar.prev();
                        getDashboard();
                    }
                },
                next: {
                    text: 'Next',
                    click: function()
                    {
                        weekCalendar.next();
                        getDashboard();
                    }
                },
                today: {
                    text: 'Today',
                    click: function()
                    {
                        weekCalendar.today();
                        getDashboard();
                    }
                },
            }
        });
        weekCalendar.render();

        // Dashboard Charts
        var moneyChartArea = document.getElementById("moneyChartArea");
        if (moneyChartArea !== null)
        {
            var moneyChartOptions =
            {
                chart:
                {
                    id: "spline-area-1",
                    group: "social",
                    height: 135,
                    width: "100%",
                    background: "#46c79e",
                    type: "area",
                    sparkline:
                    {
                        enabled: true,
                    },
                },
                yaxis:
                {
                    labels:
                    {
                        minWidth: 40,
                    },
                },
                stroke:
                {
                    width: 3,
                },
                colors: ["#ffffff"],
                fill:
                {
                    type: "gradient",
                    gradient:
                    {
                        shadeIntensity: 1,
                        opacityFrom: 0.7,
                        opacityTo: 0.3,
                        stops: [0, 90, 100],
                    },
                },
                labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                tooltip:
                {
                    followCursor: false,
                    theme: "light",
                    x:
                    {
                        show: true,
                    },
                    marker:
                    {
                        show: false,
                    },
                    y:
                    {
                        title:
                        {
                            formatter: function ()
                            {
                                return "Money Earned";
                            },
                        },
                    },
                },
                series:
                [
                    {
                        data: [0, 0, 0, 0, 0, 0, 0],
                    }
                ]
            };
            var moneyChart = new ApexCharts(moneyChartArea, moneyChartOptions);
            moneyChart.render();
        }
        var studentsChartArea = document.getElementById("studentsChartArea");
        if (studentsChartArea !== null)
        {
            var studentsChartOptions =
            {
                chart:
                {
                    id: "spline-area-3",
                    group: "social",
                    height: 135,
                    width: "100%",
                    background: "#6696fe",
                    type: "area",
                    sparkline:
                    {
                        enabled: true,
                    },
                },
                yaxis:
                {
                    labels:{
                        minWidth: 40,
                    },
                },
                stroke:
                {
                    width: 3,
                },
                colors: ["#ffffff"],
                fill:
                {
                    type: "gradient",
                    gradient:
                    {
                        shadeIntensity: 1,
                        opacityFrom: 0.7,
                        opacityTo: 0.3,
                        stops: [0, 90, 100],
                    },
                },
                labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                tooltip:
                {
                    followCursor: false,
                    theme: "light",
                    x:
                    {
                        show: true,
                    },
                    marker:
                    {
                        show: false,
                    },
                    y: {
                        title: 
                        {
                            formatter: function ()
                            {
                                return "Classes Taught";
                            },
                        },
                    },
                },
                series:
                [
                    {
                        data: [0, 0, 0, 0, 0, 0, 0],
                    },
                ],
            };
            var studentsChart = new ApexCharts(studentsChartArea, studentsChartOptions);
            studentsChart.render();
        }
        var hoursChartArea = document.getElementById("hoursChartArea");
        if (hoursChartArea !== null)
        {
            var hoursChartOptions =
            {
                chart:
                {
                    id: "spline-area-3",
                    group: "social",
                    height: 135,
                    width: "100%",
                    background: "#fd5190",
                    type: "area",
                    sparkline: {
                        enabled: true,
                    },
                },
                yaxis:
                {
                    labels: {
                        minWidth: 40,
                    },
                },
                stroke:
                {
                    width: 3,
                },
                colors: ["#ffffff"],
                fill:
                {
                    type: "gradient",
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.7,
                        opacityTo: 0.3,
                        stops: [0, 90, 100],
                    },
                },
                labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                tooltip:
                {
                    followCursor: false,
                    theme: "light",
                    x:
                    {
                        show: true,
                    },
                    marker:
                    {
                        show: false,
                    },
                    y: {
                        title:
                        {
                            formatter: function ()
                            {
                                return "Hours Taught";
                            },
                        },
                    },
                },
                series:
                [
                    {
                        data: [0, 0, 0, 0, 0, 0, 0],
                    },
                ],
            };
            var hoursChart = new ApexCharts(hoursChartArea, hoursChartOptions);
            hoursChart.render();
        }

        // Get info for first time page load
        setTimeout(function() {pageLoadFunction();}, asyncFunctionTimeout);

        // Display success message
        function successMessage(text)
        {
            // Create divs
            var msgDiv = document.getElementById("serverMessage");
            var msg = document.createElement("div");
            msg.setAttribute("class", "successMessage");
            msg.appendChild(document.createTextNode("Success! " + text));
            msgDiv.appendChild(msg);

            // Clear message
            setTimeout(function ()
            {
                msgDiv.removeChild(msg);
            }, 1500);
        };

        // Display error message
        function errorMessage(text)
        {
            // Create divs
            var msgDiv = document.getElementById("serverMessage");
            var msg = document.createElement("div");
            msg.setAttribute("class", "errorMessage");
            msg.appendChild(document.createTextNode("Error! " + text));
            msgDiv.appendChild(msg);

            // Clear message
            setTimeout(function ()
            {
                msgDiv.removeChild(msg);
            }, 1500);
        };

        // Function to open student modal
        function openStudentModal(studentId)
        {
            // Set student id
            currentAdminStudentId = studentId;

            // Update input fields
            document.getElementById("editStudentFirstName").value = "";
            document.getElementById("editStudentLastName").value = "";
            document.getElementById("editStudentBirthday").value = "";
            document.getElementById("editStudentEmail").value = "";
            document.getElementById("editStudentPrice").value = "";
            document.getElementById("editStudentPhone").value = "";

            // Open modal
            studentModal.show();

            // Get student data
            setTimeout(function() {getStudent();}, asyncFunctionTimeout);
        }

        // Function to open invoice modal
        function openStudentInvoiceModal(studentId)
        {
            // Update form submit action
            document.getElementById("getInvoiceForm").onsubmit = function() {return getStudentInvoice()};

            // Toggle off settings if on
            if (document.getElementById("getInvoiceForm").classList.contains("make-hidden") == false)
            {
                document.getElementById("getInvoiceForm").classList.toggle("make-hidden");
            }

            // Clear table
            adminInvoiceTableEmpty = 1;
            document.getElementById("invoiceTableBody").innerHTML =
            `<tr>
                <th></th>
                <th></th>
                <th></th>
                <th>Loading</th>
                <th></th>
                <th></th>
            </tr>`;

            // Set header
            document.getElementById("modalInvoiceFullName").innerHTML = document.getElementById("studentCarousel" + studentId + "First").innerHTML + " " + document.getElementById("studentCarousel" + studentId + "Last").innerHTML;
            document.getElementById("modalInvoicePhone").innerHTML = "Phone: " + document.getElementById("studentCarousel" + studentId + "Phone").innerHTML;
            document.getElementById("modalInvoiceEmail").innerHTML = "Email: " + document.getElementById("studentCarousel" + studentId + "Email").innerHTML;

            // Set student id
            currentAdminStudentId = studentId;

            // Open modal
            invoiceModal.show();

            // Set start date in invoice
            var today = new Date();
            today.setDate(today.getDate() - today.getDay() + (today.getDay() == 0 ? -6:1));
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            document.getElementById("invoiceStartDate").value = `${year}-${month}-${day}`;

            // Set end date in invoice
            today.setDate(today.getDate() + 6);
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            document.getElementById("invoiceEndDate").value = `${year}-${month}-${day}`;

            // Get invoice
            setTimeout(function() {getStudentInvoice();}, asyncFunctionTimeout);
        }

        // Function to open student modal
        function openTutorModal(tutorId)
        {
            // Set student id
            currentAdminTutorId = tutorId;

            // Update input fields
            document.getElementById("editTutorFirstName").value = "";
            document.getElementById("editTutorLastName").value = "";
            document.getElementById("editTutorBirthday").value = "";
            document.getElementById("editTutorEmail").value = "";
            document.getElementById("editTutorPercentage").value = "";
            document.getElementById("editTutorPhone").value = "";

            // Open modal
            tutorModal.show();

            // Get student data
            setTimeout(function() {getTutor();}, asyncFunctionTimeout);
        }

        // Function to open invoice modal
        function openTutorInvoiceModal(tutorId)
        {
            // Update form submit action
            document.getElementById("getInvoiceForm").onsubmit = function() {return getTutorInvoice()};

            // Toggle off settings if on
            if (document.getElementById("getInvoiceForm").classList.contains("make-hidden") == false)
            {
                document.getElementById("getInvoiceForm").classList.toggle("make-hidden");
            }

            // Clear table
            adminInvoiceTableEmpty = 1;
            document.getElementById("invoiceTableBody").innerHTML =
            `<tr>
                <th></th>
                <th></th>
                <th></th>
                <th>Loading</th>
                <th></th>
                <th></th>
            </tr>`;

            // Set header
            document.getElementById("modalInvoiceFullName").innerHTML = document.getElementById("tutorCarousel" + tutorId + "First").innerHTML + " " + document.getElementById("tutorCarousel" + tutorId + "Last").innerHTML;
            document.getElementById("modalInvoicePhone").innerHTML = "Phone: " + document.getElementById("tutorCarousel" + tutorId + "Phone").innerHTML;
            document.getElementById("modalInvoiceEmail").innerHTML = "Email: " + document.getElementById("tutorCarousel" + tutorId + "Email").innerHTML;

            // Set student id
            currentAdminTutorId = tutorId;

            // Open modal
            invoiceModal.show();

            // Set start date in invoice
            var today = new Date();
            today.setDate(today.getDate() - today.getDay() + (today.getDay() == 0 ? -6:1));
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            document.getElementById("invoiceStartDate").value = `${year}-${month}-${day}`;

            // Set end date in invoice
            today.setDate(today.getDate() + 6);
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            document.getElementById("invoiceEndDate").value = `${year}-${month}-${day}`;

            // Get invoice
            setTimeout(function() {getTutorInvoice();}, asyncFunctionTimeout);
        }
        
        // Function to open contract modal
        function openContractModal(studentId)
        {
            // Toggle off settings if on
            if (document.getElementById("updateContractForm").classList.contains("make-hidden") == false)
            {
                document.getElementById("updateContractForm").classList.toggle("make-hidden");
            }

            // Set student id
            currentAdminStudentId = studentId;

            // Open modal
            contractModal.show();
        }

        // Set event delete function
        function eventDeleteConfirm()
        {
            // Change text
            document.getElementById("modalDeleteButton").innerHTML = "Confirm Delete?";

            // Change click function
            document.getElementById("modalDeleteButton").onclick = eventDeleteConfirmed;
        }

        // Set event delete confirm function
        function eventDeleteConfirmed()
        {
            // Close Modal
            eventModal.hide();
            
            // Get inputs
            var inputsAsArray = {};

            // Add all saved state data to input array
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);
            inputsAsArray["Date"] = currentEvent._def.extendedProps["Date"];
            inputsAsArray["StudentId"] = currentEvent._def.extendedProps["StudentId"];
            inputsAsArray["StudentPrice"] = currentEvent._def.extendedProps["StudentPrice"];
            inputsAsArray["ClassId"] = currentEvent._def.extendedProps["ClassId"];
            inputsAsArray["startTime"] = currentEvent._def.extendedProps["StartTime"];
            inputsAsArray["endTime"] = currentEvent._def.extendedProps["EndTime"];
            inputsAsArray["Notes"] = currentEvent._def.extendedProps["Notes"].trim();
            
            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "deleteSession", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Refresh dashboard and tutor data
                    getDashboard();

                    // Show server message
                    successMessage(this.responseText);

                    // Change delete function back
                    document.getElementById("modalDeleteButton").onclick = eventDeleteConfirm;
                }
                else
                {
                    // Show error message
                    errorMessage(this.responseText);
                }
            };
            setTimeout(function() {request.send(JSON.stringify(inputsAsArray));}, asyncFunctionTimeout);
        }

        // Update event using data from modal form
        function updateEvent()
        {
            // Close Modal
            eventModal.hide();

            // Get inputs
            var inputsAsArray = {};
            var inputs = document.getElementById("editSessionModalForm").elements;
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add all saved state data as prev to input array
            inputsAsArray["Notes"] = document.getElementById("notesModalBox").value;
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);
            inputsAsArray["prevDate"] = currentEvent._def.extendedProps["Date"];
            inputsAsArray["prevStudentId"] = currentEvent._def.extendedProps["StudentId"];
            inputsAsArray["prevStudentPrice"] = currentEvent._def.extendedProps["StudentPrice"];
            inputsAsArray["prevClassId"] = currentEvent._def.extendedProps["ClassId"];
            inputsAsArray["prevStartTime"] = currentEvent._def.extendedProps["StartTime"];
            inputsAsArray["prevEndTime"] = currentEvent._def.extendedProps["EndTime"];
            inputsAsArray["prevNotes"] = currentEvent._def.extendedProps["Notes"].trim();
            

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "updateSession", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Set event data
                    var classData = JSON.parse(document.getElementById("editSessionClassesModalDropdown").value);
                    var studentData = JSON.parse(document.getElementById("editSessionStudentsModalDropdown").value);
                    currentEvent.setProp("title", `${studentData["FirstName"]} ${studentData["LastName"].charAt(0)}. ${classData["Name"]} ${classData["Level"]}`);
                    currentEvent.setStart(document.getElementById("editSessionModalDateTutored").value, {maintainDuration: true});

                    // Save event extended data
                    currentEvent.setExtendedProp("Date", document.getElementById("editSessionModalDateTutored").value)
                    currentEvent.setExtendedProp("StartTime", document.getElementById("startTimeModalPicker").value)
                    currentEvent.setExtendedProp("EndTime", document.getElementById("endTimeModalPicker").value)
                    currentEvent.setExtendedProp("Notes", document.getElementById("notesModalBox").value)

                    // Save class and student id if not empty
                    if (document.getElementById("editSessionStudentsModalDropdown").value != "")
                    {
                        currentEvent.setExtendedProp("StudentId", JSON.parse(document.getElementById("editSessionStudentsModalDropdown").value)["Id"])   
                        currentEvent.setExtendedProp("StudentPrice", JSON.parse(document.getElementById("editSessionStudentsModalDropdown").value)["Price"])
                    }
                    if (document.getElementById("editSessionClassesModalDropdown").value != "")
                    {
                        currentEvent.setExtendedProp("ClassId", JSON.parse(document.getElementById("editSessionClassesModalDropdown").value)["Id"])
                    }

                    // Refresh stats
                    getDashboard();

                    // Show server response
                    successMessage(this.responseText);
                }
                else
                {
                    // Show server response
                    errorMessage(this.responseText);
                }
            };
            setTimeout(function() {request.send(JSON.stringify(inputsAsArray));}, asyncFunctionTimeout);
            return false;
        }

        // Submit action for update contract modal
        function updateContract()
        {
            return false;
        }
        
        // Update profile header
        function updateProfileHeader()
        {
            // Set profile header
            document.getElementById("userProfileName").innerHTML = tutorData["FirstName"] + " " + tutorData["LastName"];
            document.getElementById("userProfileEmail").innerHTML = tutorData["Email"];
            document.getElementById("userProfilePhone").innerHTML = tutorData["PhoneNumber"];
        }

        // Submit action for update profile form
        function updateUserProfile()
        {
            // Get inputs
            var inputs = document.getElementById("updateUserProfileForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "updateUserProfile", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Update tutor data
                    tutorData = JSON.parse(this.responseText);

                    // Update name text areas
                    document.getElementById("hiText").innerHTML = "Hi " + tutorData["FirstName"] + "!";
                    updateProfileHeader();
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };
        
        // Submit action for update password form
        function updatePassword()
        {
            // Get inputs
            var inputs = document.getElementById("updatePasswordForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "updatePassword", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    successMessage(this.responseText);
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };
        
        // Submit action for update student form
        function updateStudent()
        {
            // Close modal
            studentModal.hide();

            // Get inputs
            var inputs = document.getElementById("updateStudentForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Add student id
            inputsAsArray["studentId"] = currentAdminStudentId;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "updateStudent", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Update student card
                    document.getElementById(`studentCarousel${currentAdminStudentId}First`).innerHTML = inputsAsArray["FirstName"];
                    document.getElementById(`studentCarousel${currentAdminStudentId}Last`).innerHTML = inputsAsArray["LastName"];
                    document.getElementById(`studentCarousel${currentAdminStudentId}Phone`).innerHTML = inputsAsArray["PhoneNumber"];
                    document.getElementById(`studentCarousel${currentAdminStudentId}Email`).innerHTML = inputsAsArray["Email"];

                    // Close edit student modal
                    successMessage(this.responseText)
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            setTimeout(function() {request.send(JSON.stringify(inputsAsArray));}, asyncFunctionTimeout);
            return false;
        };

        // Submit action for update tutor form
        function updateTutor()
        {
            // Close modal
            tutorModal.hide();

            // Get inputs
            var inputs = document.getElementById("updateTutorForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Add student id
            inputsAsArray["tutorId"] = currentAdminTutorId;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "updateTutor", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Update student card
                    document.getElementById(`tutorCarousel${currentAdminTutorId}First`).innerHTML = inputsAsArray["FirstName"];
                    document.getElementById(`tutorCarousel${currentAdminTutorId}Last`).innerHTML = inputsAsArray["LastName"];
                    document.getElementById(`tutorCarousel${currentAdminTutorId}Phone`).innerHTML = inputsAsArray["PhoneNumber"];
                    document.getElementById(`tutorCarousel${currentAdminTutorId}Email`).innerHTML = inputsAsArray["Email"];

                    // Close edit student modal
                    successMessage(this.responseText)
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            setTimeout(function() {request.send(JSON.stringify(inputsAsArray));}, asyncFunctionTimeout);
            return false;
        };

        // Submit action for add tutor form
        function addTutor()
        {
            // Get inputs
            var inputs = document.getElementById("addTutorForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addTutor", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    successMessage(this.responseText);
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for add student form
        function addStudent()
        {
            // Get inputs
            var inputs = document.getElementById("addStudentForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addStudent", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    successMessage(this.responseText);
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for add class form
        function addClass()
        {
            // Get inputs
            var inputs = document.getElementById("addClassForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addClass", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    successMessage(this.responseText);
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for add session form
        function addSession()
        {
            // Close modal
            sessionModal.hide();

            // Get inputs
            var inputs = document.getElementById("addSessionModalForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addSession", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    successMessage(this.responseText);
                    getDashboard();
                    getTutorTotals();
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            setTimeout(function() {request.send(JSON.stringify(inputsAsArray));}, asyncFunctionTimeout);
            return false;
        };

        // Submit action for add session form
        function addAdminSession()
        {
            // Get inputs
            var inputs = document.getElementById("addAdminSessionForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addAdminSession", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    successMessage(this.responseText);
                    getDashboard();
                    getTutorTotals();
                }
                else
                {
                    errorMessage(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Get from server to populate edit inputs
        function getStudent()
        {
            request = new XMLHttpRequest();
            request.open("POST", "getStudent", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Get students as list
                    studentInfo = JSON.parse(this.responseText);

                    // If student returned
                    if (studentInfo.length == 1)
                    {
                        // Update input fields
                        document.getElementById("editStudentFirstName").value = studentInfo[0]["FirstName"];
                        document.getElementById("editStudentLastName").value = studentInfo[0]["LastName"];
                        document.getElementById("editStudentBirthday").value = studentInfo[0]["Birthday"].split('T')[0];
                        document.getElementById("editStudentEmail").value = studentInfo[0]["Email"];
                        document.getElementById("editStudentPrice").value = studentInfo[0]["Price"];
                        document.getElementById("editStudentPhone").value = studentInfo[0]["PhoneNumber"];
                    }
                    // Else no student found
                    else
                    {
                        // Update input fields
                        document.getElementById("editStudentFirstName").value = "Not Found";
                        document.getElementById("editStudentLastName").value = "Not Found";
                        document.getElementById("editStudentBirthday").value = "";
                        document.getElementById("editStudentEmail").value = "Not Found";
                        document.getElementById("editStudentPrice").value = "Not Found";
                        document.getElementById("editStudentPhone").value = "Not Found";
                    }
                }
                else
                {
                    // Update input fields
                    document.getElementById("editStudentFirstName").value = "undefined";
                    document.getElementById("editStudentLastName").value = "undefined";
                    document.getElementById("editStudentBirthday").value = "undefined";
                    document.getElementById("editStudentEmail").value = "undefined";
                    document.getElementById("editStudentPrice").value = "undefined";
                    document.getElementById("editStudentPhone").value = "undefined";
                }
            };
            request.send(JSON.stringify({"tutor": tutorData, "studentId": currentAdminStudentId}));
        }

        // Get from server to populate edit inputs
        function getTutor()
        {
            request = new XMLHttpRequest();
            request.open("POST", "getTutor", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Get students as list
                    tutorInfo = JSON.parse(this.responseText);

                    // If tutor returned
                    if (tutorInfo.length == 1)
                    {
                        // Update input fields
                        document.getElementById("editTutorFirstName").value = tutorInfo[0]["FirstName"];
                        document.getElementById("editTutorLastName").value = tutorInfo[0]["LastName"];
                        document.getElementById("editTutorEmail").value = tutorInfo[0]["Email"];
                        document.getElementById("editTutorPercentage").value = tutorInfo[0]["Percentage"];
                        document.getElementById("editTutorPhone").value = tutorInfo[0]["PhoneNumber"];
                    }
                    // Else no tutor found
                    else
                    {
                        // Update input fields
                        document.getElementById("editTutorFirstName").value = "Not Found";
                        document.getElementById("editTutorLastName").value = "Not Found";
                        document.getElementById("editTutorBirthday").value = "";
                        document.getElementById("editTutorEmail").value = "Not Found";
                        document.getElementById("editTutorPercentage").value = "Not Found";
                        document.getElementById("editTutorPhone").value = "Not Found";
                    }
                }
                else
                {
                    // Update input fields
                    document.getElementById("editTutorFirstName").value = "undefined";
                    document.getElementById("editTutorLastName").value = "undefined";
                    document.getElementById("editTutorBirthday").value = "undefined";
                    document.getElementById("editTutorEmail").value = "undefined";
                    document.getElementById("editTutorPercentage").value = "undefined";
                    document.getElementById("editTutorPhone").value = "undefined";
                }
            };
            request.send(JSON.stringify({"tutor": tutorData, "tutorId": currentAdminTutorId}));
        }

        // Get student sessions
        function getStudentInvoice()
        {
            // Get inputs
            var inputsAsArray = {};
            var inputs = document.getElementById("getInvoiceForm").elements;
            inputsAsArray["studentId"] = currentAdminStudentId; 
            for (var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getStudentInvoice", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Get invoice table
                var invoiceTableBody = document.getElementById("invoiceTableBody");

                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Init stuff
                    var invoiceData = JSON.parse(this.responseText);
                    var totalPrice = 0;

                    // Clear table
                    invoiceTableBody.innerHTML = "";

                    // Go through each row and add to table
                    for (let i = 0; i < invoiceData.length; i++)
                    {
                        // Get date
                        var classDate = new Date(invoiceData[i]["Date"].substring(0, 10));

                        // Add to invoice table
                        invoiceTableBody.innerHTML +=
                        `<tr>
                            <th>${i + 1}</th>
                            <th>${classDate.toISOString().split('T')[0]}</th>
                            <th>${invoiceData[i]["TutorFirstName"]} ${invoiceData[i]["TutorLastName"]} ${invoiceData[i]["ClassName"]} ${invoiceData[i]["Level"]}</th>
                            <th>${invoiceData[i]["StartTime"].substring(0, 5)}</th>
                            <th>${invoiceData[i]["EndTime"].substring(0, 5)}</th>
                            <th>$${Number(invoiceData[i]["MoneyGenerated"]).toFixed(2)}</th>
                        </tr>`;

                        // Add money generated to total price
                        totalPrice += invoiceData[i]["MoneyGenerated"];
                    }

                    // If not empty
                    if (invoiceData.length != 0)
                    {
                        // Update var
                        adminInvoiceTableEmpty = 0;

                        // Add total
                        invoiceTableBody.innerHTML +=
                        `<tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th>Total</th>
                            <th>$${Number(totalPrice).toFixed(2)}</th>
                        </tr>`;
                    }
                    // Empty
                    else
                    {
                        // Clear table
                        invoiceTableBody.innerHTML =
                        `<tr>
                            <th></th>
                            <th></th>
                            <th>No</th>
                            <th>sessions</th>
                            <th>logged</th>
                            <th></th>
                        </tr>`;
                    }
                }
                // Server error
                else
                {
                    // Clear table
                    invoiceTableBody.innerHTML =
                    `<tr>
                        <th></th>
                        <th>ERROR!</th>
                        <th>Couldn't</th>
                        <th>fetch</th>
                        <th>data</th>
                        <th></th>
                    </tr>`;
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Get student sessions
        function getTutorInvoice()
        {
            // Get inputs
            var inputsAsArray = {};
            var inputs = document.getElementById("getInvoiceForm").elements;
            inputsAsArray["tutorId"] = currentAdminTutorId; 
            for (var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getTutorInvoice", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Get invoice table
                var invoiceTableBody = document.getElementById("invoiceTableBody");

                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Init stuff
                    var invoiceData = JSON.parse(this.responseText);
                    var totalPrice = 0;

                    // Clear table
                    invoiceTableBody.innerHTML = "";

                    // Go through each row and add to table
                    for (let i = 0; i < invoiceData.length; i++)
                    {
                        // Get date
                        var classDate = new Date(invoiceData[i]["Date"].substring(0, 10));

                        // Add to invoice table
                        invoiceTableBody.innerHTML +=
                        `<tr>
                            <th>${i + 1}</th>
                            <th>${classDate.toISOString().split('T')[0]}</th>
                            <th>${invoiceData[i]["StudentFirstName"]} ${invoiceData[i]["StudentLastName"]} ${invoiceData[i]["ClassName"]} ${invoiceData[i]["Level"]}</th>
                            <th>${invoiceData[i]["StartTime"].substring(0, 5)}</th>
                            <th>${invoiceData[i]["EndTime"].substring(0, 5)}</th>
                            <th>$${Number(invoiceData[i]["MoneyGenerated"]).toFixed(2)}</th>
                        </tr>`;

                        // Add money generated to total price
                        totalPrice += invoiceData[i]["MoneyGenerated"];
                    }

                    // If not empty
                    if (invoiceData.length != 0)
                    {
                        // Update var
                        adminInvoiceTableEmpty = 0;

                        // Add total
                        invoiceTableBody.innerHTML +=
                        `<tr>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th>Total</th>
                            <th>$${Number(totalPrice).toFixed(2)}</th>
                        </tr>`;
                    }
                    // Empty
                    else
                    {
                        // Clear table
                        invoiceTableBody.innerHTML =
                        `<tr>
                            <th></th>
                            <th></th>
                            <th>No</th>
                            <th>sessions</th>
                            <th>logged</th>
                            <th></th>
                        </tr>`;
                    }
                }
                // Server error
                else
                {
                    // Clear table
                    invoiceTableBody.innerHTML =
                    `<tr>
                        <th></th>
                        <th>ERROR!</th>
                        <th>Couldn't</th>
                        <th>fetch</th>
                        <th>data</th>
                        <th></th>
                    </tr>`;
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        }
        
        // Get dashboard charts and calendar
        function getDashboard()
        {
            // Add on click action for week day
            document.getElementsByClassName("fc-day").forEach(day => day.addEventListener('click', day =>
            {
                // Set date in modal
                document.getElementById("addSessionModalDateTutored").value = day.target.getAttribute("data-date");
                document.getElementById("addSessionModalNotes").value = "";

                // Open modal
                sessionModal.show();

                // Clear dropdowns
                document.getElementById("addSessionStudentsModalDropdown").innerHTML = `<option value="" disabled selected></option>`;
                document.getElementById("addSessionClassesModalDropdown").innerHTML = `<option value="" disabled selected></option>`;

                // Get dropdowns info
                setTimeout(function()
                {
                    // Get students dropdown
                    request = new XMLHttpRequest();
                    request.open("POST", "getStudents", false);
                    request.setRequestHeader('Content-type', 'application/json');
                    request.onreadystatechange = function()
                    {
                        // Successful response
                        if (this.readyState == 4 && this.status == 200) 
                        {
                            // Get students as list
                            studentsInfo = JSON.parse(this.responseText);

                            for (let i = 0; i < studentsInfo.length; i++)
                            {
                                // Get student
                                sInfo = studentsInfo[i];

                                // Add student to dropdowns
                                document.getElementById("addSessionStudentsModalDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                            }
                        }
                    };
                    request.send(JSON.stringify());

                    // Get classes dropdown
                    request = new XMLHttpRequest();
                    request.open("POST", "getClasses", false);
                    request.setRequestHeader('Content-type', 'application/json');
                    request.onreadystatechange = function()
                    {
                        // Successful response
                        if (this.readyState == 4 && this.status == 200) 
                        {
                            classesInfo = JSON.parse(this.responseText);
                            for (let i = 0; i < classesInfo.length; i++)
                            {
                                cInfo = classesInfo[i];
                                document.getElementById("addSessionClassesModalDropdown").options.add(new Option(cInfo["Name"] + " (" + cInfo["Level"] + ")", JSON.stringify(cInfo)));
                            }
                        }
                    };
                    request.send(JSON.stringify());
                }, asyncFunctionTimeout);
            }));

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getDashboard", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Parse output json
                    var outputsArray = JSON.parse(this.responseText);

                    // Update dashboard top 3 numbers
                    document.getElementById("moneyEarned").innerHTML = `$${Number(outputsArray["totalMoneyGenerated"]).toFixed(2)}`;
                    document.getElementById("studentsTutored").innerHTML = outputsArray["totalStudentsTutored"];
                    document.getElementById("hoursTutored").innerHTML = Number(outputsArray["totalHoursTutored"]).toFixed(2);

                    // Update dashboard top 3 charts
                    moneyChart.updateSeries([{data: outputsArray["moneyGeneratedList"]}]);
                    studentsChart.updateSeries([{data: outputsArray["studentsTutoredList"]}]);
                    hoursChart.updateSeries([{data: outputsArray["hoursTutoredList"]}]);

                    // Update calendar
                    weekCalendar.removeAllEvents();
                    var hours = outputsArray["calendarHours"];
                    for (let i = 0; i < hours.length; i++)
                    {
                        // Get date
                        var classDate = new Date(hours[i]["Date"].substring(0, 10));

                        // Add to calendar
                        weekCalendar.addEvent
                        (
                            {
                                title: `${hours[i]["FirstName"]} ${hours[i]["LastName"].charAt(0)}. ${hours[i]["ClassName"]} ${hours[i]["Level"]}`,
                                start: `${classDate.toISOString().split('T')[0]}`,
                                StudentId: `${hours[i]["StudentId"]}`,
                                StudentPrice: 0,
                                ClassId: `${hours[i]["ClassId"]}`,
                                StartTime: `${hours[i]["StartTime"]}`,
                                EndTime: `${hours[i]["EndTime"]}`,
                                Date: `${classDate.toISOString().split('T')[0]}`,
                                Notes: `${hours[i]["Notes"]}`,
                                color: "#31343d"
                            }
                        );
                    }
                }
                else
                {
                    // Update dashboard top 3 numbers
                    document.getElementById("moneyEarned").innerHTML = "Error";
                    document.getElementById("studentsTutored").innerHTML = "Error";
                    document.getElementById("hoursTutored").innerHTML = "Error";
                }
            };
            request.send(JSON.stringify({"StartDate": weekCalendar.getDate(), "Tutor": tutorData}));
            return false;
        };

        // Get tutor totals
        function getTutorTotals()
        {
            // Get inputs
            var inputsAsArray = {};
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getTutorTotals", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Parse output json
                    var tutorTotals = JSON.parse(this.responseText);

                    // Update dashboard elements
                    document.getElementById("careerMoneyMadeTotal").innerHTML = `$${Number(tutorTotals["TotalMoney"]).toFixed(2)}`;
                    document.getElementById("careerStudentsTaughtTotal").innerHTML = tutorTotals["TotalStudents"];
                    document.getElementById("careerHoursTaughtTotal").innerHTML = Number(tutorTotals["TotalHours"]).toFixed(2);
                }
                else
                {
                    // Update dashboard elements
                    document.getElementById("careerMoneyMadeTotal").innerHTML = "Error";
                    document.getElementById("careerStudentsTaughtTotal").innerHTML = "Error";
                    document.getElementById("careerHoursTaughtTotal").innerHTML = "Error";
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        }
        
        // Get company totals
        function getCompanyTotals()
        {
            // Get inputs
            var inputsAsArray = {};
            inputsAsArray["tutor"] = tutorData;

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getCompanyTotals", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Parse output json
                    var companyTotals = JSON.parse(this.responseText);

                    // Update dashboard elements
                    document.getElementById("companyMoneyMadeTotal").innerHTML = `$${Number(companyTotals["TotalMoney"]).toFixed(2)}`;
                    document.getElementById("companyStudentsTaughtTotal").innerHTML = companyTotals["TotalStudents"];
                    document.getElementById("companyHoursTaughtTotal").innerHTML = Number(companyTotals["TotalHours"]).toFixed(2);
                }
                else
                {
                    // Update dashboard elements
                    document.getElementById("companyMoneyMadeTotal").innerHTML = "Error";
                    document.getElementById("companyStudentsTaughtTotal").innerHTML = "Error";
                    document.getElementById("companyHoursTaughtTotal").innerHTML = "Error";
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        }
                
        // Get rows for table
        function getAllSessions(rowLimit)
        {
            // Get inputs
            var inputsAsArray = {};
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);

            // Get query size
            if (rowLimit == undefined)
            {
                inputsAsArray["QueryLimit"] = 25;
                document.getElementById("dropdownMenuLink").innerHTML = "Viewing last 25 sessions";
            }
            else if (rowLimit == -1)
            {
                inputsAsArray["QueryLimit"] = 9999999;
                document.getElementById("dropdownMenuLink").innerHTML = "Viewing all sessions";
            }
            else
            {
                inputsAsArray["QueryLimit"] = rowLimit;
                document.getElementById("dropdownMenuLink").innerHTML = "Viewing last " + rowLimit + " sessions";
            }

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getAllSessions", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Clear table
                    sessionsTable.DataTable().rows().remove().draw();
                    
                    // Go through each row and add to table
                    var hours = JSON.parse(this.responseText);
                    for (let i = 0; i < hours.length; i++)
                    {
                        // Get date
                        var classDate = new Date(hours[i]["Date"].substring(0, 10));

                        // Add to hour table
                        sessionsTable.DataTable().row.add(
                        [
                            classDate.toISOString().split('T')[0],
                            hours[i]["FirstName"] + " " +hours[i]["LastName"],
                            hours[i]["ClassName"] + " " +hours[i]["Level"],
                            hours[i]["StartTime"].substring(0, 5),
                            hours[i]["EndTime"].substring(0, 5),
                            "$" + hours[i]["MoneyGenerated"],
                            hours[i]["Notes"]
                        ]).draw();
                    }
                }
                else
                {
                    errorMessage("Couldn't get data.")
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };
        
        // Get info for page load
        function pageLoadFunction()
        {
            // Set name in navbar text
            document.getElementById("hiText").innerHTML = "Hi " + tutorData["FirstName"] + "!";

            // Get dashboard statistics
            getDashboard();
        }
        
        // Get info for tutor dashboard
        function profileDashboardFunction()
        {
            // Set profile header text
            updateProfileHeader();

            // Get tutor stats
            getTutorTotals();
        }
 
        // Get info for admin dashboard
        function adminDashboardFunction()
        {
            // Get company totals
            getCompanyTotals();
        }

        // Get info for admin add
        function adminAddFunction()
        {
            // Set today date in add hour form
            var today = new Date();
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            document.getElementById("addAdminSessionDateTutored").value = `${year}-${month}-${day}`;

            // Clear dropdowns
            document.getElementById("addAdminSessionStudentsDropdown").innerHTML = `<option value="" disabled selected></option>`;
            document.getElementById("addAdminSessionClassesDropdown").innerHTML = `<option value="" disabled selected></option>`;
            document.getElementById("addAdminSessionTutorsDropdown").innerHTML = `<option value="" disabled selected></option>`;

            // Get values for students dropdown
            request = new XMLHttpRequest();
            request.open("POST", "getStudents", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Get students as list
                    studentsInfo = JSON.parse(this.responseText);

                    for (let i = 0; i < studentsInfo.length; i++)
                    {
                        // Get student
                        sInfo = studentsInfo[i];

                        // Add student to dropdowns
                        document.getElementById("addAdminSessionStudentsDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                    }
                }
            };
            request.send(JSON.stringify());

            // Get values for classes dropdown
            request = new XMLHttpRequest();
            request.open("POST", "getClasses", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    classesInfo = JSON.parse(this.responseText);
                    for (let i = 0; i < classesInfo.length; i++)
                    {
                        cInfo = classesInfo[i];
                        document.getElementById("addAdminSessionClassesDropdown").options.add(new Option(cInfo["Name"] + " (" + cInfo["Level"] + ")", JSON.stringify(cInfo)));
                    }
                }
            };
            request.send(JSON.stringify());

            // Get values for tutors dropdown
            request = new XMLHttpRequest();
            request.open("POST", "getTutors", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Get tutors as list
                    tutorsInfo = JSON.parse(this.responseText);

                    // Go through tutor list
                    for (let i = 0; i < tutorsInfo.length; i++)
                    {
                        // Get tutor
                        tInfo = tutorsInfo[i];

                        // Add to tutor dropdown
                        document.getElementById("addAdminSessionTutorsDropdown").options.add(new Option(`${tInfo["FirstName"]} ${tInfo["LastName"]} (${tInfo["Email"]})`, JSON.stringify(tInfo)));
                    }
                }
            };
            request.send(JSON.stringify({"tutor": tutorData}));
        }

        // Get info for admin students
        function adminStudentsFunction()
        {
            // Get students
            request = new XMLHttpRequest();
            request.open("POST", "getStudents", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Clear area
                    document.getElementById("adminStudentsCarousel").innerHTML = "";

                    // Get students as list
                    studentsInfo = JSON.parse(this.responseText);

                    // Go through student list
                    for (let i = 0; i < studentsInfo.length; i++)
                    {
                        // Get student
                        sInfo = studentsInfo[i];

                        // Add to student list area
                        document.getElementById("adminStudentsCarousel").innerHTML +=
                        `<div class="col-lg-6 col-xl-4 col-xxl-3">
                            <div class="card card-default mt-7">
                                <div class="card-body text-center">
                                    <a class="d-block mb-2">
                                        <div class="image mb-3 d-inline-flex mt-n8">
                                        </div>
                                        <h3 id="studentCarousel${sInfo["Id"]}First" class="student-tags">${sInfo["FirstName"]}</h3>
                                        <h3 id="studentCarousel${sInfo["Id"]}Last" class="student-tags">${sInfo["LastName"]}</h3>
                                        <p id="studentCarousel${sInfo["Id"]}Phone" class="mt-3 text-smoke student-tags">${sInfo["PhoneNumber"]}</p>
                                        <p id="studentCarousel${sInfo["Id"]}Email" class="mb-5 text-smoke student-tags">${sInfo["Email"]}</p>
                                    </a>
                                    <div class="row justify-content-center">
                                        <div class="col-4">
                                            <i class="mdi mdi-account-edit mdi-24px mdi-hover" style="cursor: pointer;"
                                            onclick="openStudentModal(${sInfo["Id"]})"></i>
                                        </div>
                                        <div id="studentsCarousel${sInfo["Id"]}Invoice" class="col-4">
                                            <i class="mdi mdi-coin mdi-24px mdi-hover" style="cursor: pointer;"
                                            onclick="openStudentInvoiceModal(${sInfo["Id"]})"></i>
                                        </div>
                                        <div class="col-4">
                                            <i class="mdi mdi-file-document mdi-24px mdi-hover" style="cursor: pointer;"
                                            onclick="openContractModal(${sInfo["Id"]})"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                    }
                }
            };
            request.send(JSON.stringify({"tutor": tutorData}));

            // Get start date
            var today = new Date();
            today.setDate(today.getDate() - today.getDay() + (today.getDay() == 0 ? -6:1));
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            var startDate = `${year}-${month}-${day}`;

            // Get end date
            today.setDate(today.getDate() + 6);
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            var endDate = `${year}-${month}-${day}`;

            // Get students with invoice
            request = new XMLHttpRequest();
            request.open("POST", "getStudentsWithInvoice", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Get students as list
                    studentsInfo = JSON.parse(this.responseText);

                    // Go through student list
                    for (let i = 0; i < studentsInfo.length; i++)
                    {
                        // Get student
                        sInfoId = studentsInfo[i]["StudentId"];

                        // Toggle
                        document.getElementById("studentsCarousel" + sInfoId + "Invoice").children[0].classList.toggle("notify-bottom");
                    }
                }
            };
            setTimeout(function() {request.send(JSON.stringify({"tutor": tutorData, "startDate": startDate, "endDate": endDate}));}, asyncFunctionTimeout);
        }

        // Get info for admin tutors
        function adminTutorsFunction()
        {            
            // Get students
            request = new XMLHttpRequest();
            request.open("POST", "getTutors", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Clear area
                    document.getElementById("adminTutorsCarousel").innerHTML = "";

                    // Get students as list
                    tutorsInfo = JSON.parse(this.responseText);

                    // Go through student list
                    for (let i = 0; i < tutorsInfo.length; i++)
                    {
                        // Get student
                        tInfo = tutorsInfo[i];

                        // Add to student list area
                        document.getElementById("adminTutorsCarousel").innerHTML +=
                        `<div class="col-lg-6 col-xl-4 col-xxl-3">
                            <div class="card card-default mt-7">
                                <div class="card-body text-center">
                                    <a class="d-block mb-2">
                                        <div class="image mb-3 d-inline-flex mt-n8">
                                        </div>
                                        <h3 id="tutorCarousel${tInfo["Id"]}First" class="student-tags">${tInfo["FirstName"]}</h3>
                                        <h3 id="tutorCarousel${tInfo["Id"]}Last" class="student-tags">${tInfo["LastName"]}</h3>
                                        <p id="tutorCarousel${tInfo["Id"]}Phone" class="mt-3 text-smoke student-tags">${tInfo["PhoneNumber"]}</p>
                                        <p id="tutorCarousel${tInfo["Id"]}Email" class="mb-5 text-smoke student-tags">${tInfo["Email"]}</p>
                                    </a>
                                    <div class="row justify-content-center">
                                        <div class="col-4">
                                            <i class="mdi mdi-account-edit mdi-24px mdi-hover" style="cursor: pointer;"
                                            onclick="openTutorModal(${tInfo["Id"]})"></i>
                                        </div>
                                        <div id="tutorsCarousel${tInfo["Id"]}Invoice" class="col-4">
                                            <i class="mdi mdi-coin mdi-24px mdi-hover" style="cursor: pointer;"
                                            onclick="openTutorInvoiceModal(${tInfo["Id"]})"></i>
                                        </div>
                                        <div class="col-4">
                                            <i class="mdi mdi-file-document mdi-24px mdi-hover" style="cursor: pointer;"
                                            onclick="openContractModal(${tInfo["Id"]})"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                    }
                }
            };
            request.send(JSON.stringify({"tutor": tutorData}));

            // Get start date
            var today = new Date();
            today.setDate(today.getDate() - today.getDay() + (today.getDay() == 0 ? -6:1));
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            var startDate = `${year}-${month}-${day}`;

            // Get end date
            today.setDate(today.getDate() + 6);
            var day = String(today.getDate()).padStart(2, '0');
            var month = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var year = today.getFullYear();
            var endDate = `${year}-${month}-${day}`;

            // Get students with invoice
            request = new XMLHttpRequest();
            request.open("POST", "getTutorsWithInvoice", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Get students as list
                    tutorsInfo = JSON.parse(this.responseText);

                    // Go through student list
                    for (let i = 0; i < tutorsInfo.length; i++)
                    {
                        // Get student
                        tInfoId = tutorsInfo[i]["TutorId"];

                        // Toggle
                        document.getElementById("tutorsCarousel" + tInfoId + "Invoice").children[0].classList.toggle("notify-bottom");
                    }
                }
            };
            setTimeout(function() {request.send(JSON.stringify({"tutor": tutorData, "startDate": startDate, "endDate": endDate}));}, asyncFunctionTimeout);
        }

        // Get info for profile info
        function profileFunction()
        {
            // Set profile info
            document.getElementById("userProfileFormFirstName").value = tutorData["FirstName"];
            document.getElementById("userProfileFormLastName").value = tutorData["LastName"];
            document.getElementById("userProfileFormPhone").value = tutorData["PhoneNumber"];
        }
        
        // Function to run when profile settings item is clicked
        function profileMenuNav(buttonToMakeActive, elementsToMakeVisible, functionToRun)
        {
            // Get admin body area
            var profileBodyArea = document.getElementById("profileBodyArea");
            document.getElementById(currentProfileButton).className = "nav-link";
            document.getElementById(buttonToMakeActive).className = "nav-link active";
            currentProfileButton = buttonToMakeActive;

            // Go through children
            for (let i = 0; i < profileBodyArea.children.length; i++)
            {
                if (elementsToMakeVisible.includes(i))
                {
                    profileBodyArea.children[i].style.display = "block";
                }
                else
                {
                    profileBodyArea.children[i].style.display = "none";
                }
            }

            // Run function
            setTimeout(function() {window[functionToRun]();}, asyncFunctionTimeout);
        }

        // Function to run when admin settings item is clicked
        function adminMenuNav(buttonToMakeActive, elementsToMakeVisible, functionToRun)
        {
            // Get admin body area
            var adminBodyArea = document.getElementById("adminBodyArea");
            document.getElementById(currentAdminButton).className = "nav-link";
            document.getElementById(buttonToMakeActive).className = "nav-link active";
            currentAdminButton = buttonToMakeActive;

            // Go through children
            for (let i = 0; i < adminBodyArea.children.length; i++)
            {
                if (elementsToMakeVisible.includes(i))
                {
                    adminBodyArea.children[i].style.display = "block";
                }
                else
                {
                    adminBodyArea.children[i].style.display = "none";
                }
            }

            // Run function
            setTimeout(function() {window[functionToRun]();}, asyncFunctionTimeout);
        }

        // Function to run when menu item is clicked
        function menuNav(dashboardName, elementToMakeActive, functionToRun)
        {
            // Deselect old and select current
            document.getElementById(currentDashboardButton).className = "";
            if (elementToMakeActive != "none")
            {
                document.getElementById(elementToMakeActive).className = ("active");
                currentDashboardButton = elementToMakeActive;
            }

            // If profile dashboard
            if (dashboardName == "profileArea")
            {
                profileMenuNav('profileInfoButton', [0], '');
            }

            // If admin dashboard
            if (dashboardName == "adminDashboardArea")
            {
                adminMenuNav('adminInfoButton', [0], '');
            }

            // Hide old dashboard show new and adjust current dashboard var accordingly
            document.getElementById(currentDashboard).style.display = "none";
            document.getElementById(dashboardName).style.display = "block";
            currentDashboard = dashboardName;

            // Run function
            setTimeout(function() {window[functionToRun]();}, asyncFunctionTimeout);
        }
    </script>
</html>
