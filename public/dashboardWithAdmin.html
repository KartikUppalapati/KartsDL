<!DOCTYPE HTML>
<html>
    <head>
        <title>Your Dashboard</title>
        <link rel="stylesheet" href="dashboard.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    </head>
    <body>
        <div class="navbar">
            <div class="dropdown">
                <button class="dropbtn">
                    <img src="userLogin.jpg"/>
                </button>
                <div class="dropdownContent" id="myDropdown">
                    <a id="viewProfileButton" onclick="setUserProfile(); menuNav('profileArea', 'none')">View Profile</a>
                    <a id="changePasswordButton" onclick="menuNav('updatePasswordArea', 'none')">Change Password</a>
                    <a onclick="window.location.href = '/';">Logout</a>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="sideMenu">
                <h1>MMT</h1>
                <ul id="sidemenu" class="menu">
                    <li id="mainDashboardButton" onclick="menuNav('mainDashboardArea', this.id)" class="menuItem activeMenu">Dashboard</li>
                    <li id="addHoursButton" onclick="menuNav('addHoursDashboardArea', this.id)" class="menuItem">Add Hours</li>
                    <li id="getNotesButton" onclick="menuNav('getNotesDashboardArea', this.id)" class="menuItem">Get Notes</li>
                    <div id="adminButton" class="menuItem">
                        <div class="sideMenuDropdown">
                            <a>Admin</a>
                            <div class="sideMenuDropdownContent" id="sideMenuDropdown">
                                <li id="addTutorButton" onclick="menuNav('addTutorsDashboardArea', 'adminButton')" class="menuItem">Add Tutor</li>
                                <li id="addStudentButton" onclick="menuNav('addStudentsDashboardArea', 'adminButton')" class="menuItem">Add Student</li>
                                <li id="addClassButton" onclick="menuNav('addClassesDashboardArea', 'adminButton')" class="menuItem">Add Class</li>
                                <li id="getStudentCostButton" onclick="menuNav('getCostDashboardArea', 'adminButton')" class="menuItem">Get Cost</li>
                                <li id="allFinancesButton" onclick="menuNav('allFinancesDashboardArea', 'adminButton')" class="menuItem">All Finances</li>
                            </div>
                        </div>
                    </div>
                </ul>
            </div>
            <br>
            <br>
            <br>
            <div class="dashboardArea">
                <div id="profileArea" class="allDashboardAreas">
                    <form id="updateUserProfileForm" class="adminForm" onsubmit="return updateProfile()">
                        <input id="userProfileFirstName" name="FirstName" placeholder="First Name" required type="text">
                        <input id="userProfileLastName" name="LastName" placeholder="Last Name" required type="text">
                        <input id="userProfilePhone" name="Phone" placeholder="123-456-7890" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">
                        <input id="userProfileEmail" name="Email" placeholder="Email" required type="text" disabled>
                        <div class="centerButton">
                            <button type="submit" class="submitButton">Update Profile</button>
                        </div>
                    </form>
                </div>
                <div id="updatePasswordArea" class="allDashboardAreas">
                    <form id="updatePasswordForm" class="adminForm" onsubmit="return updatePassword()">
                        <input name="OldPassword" placeholder="Old Password" required type="text">
                        <input name="NewPassword" placeholder="New Password" required type="text">
                        <input name="NewPasswordAgain" placeholder="New Password Again" required type="text">
                        <div class="centerButton">
                            <button type="submit" class="submitButton">Update Password</button>
                        </div>
                    </form>
                </div>
                <div id="mainDashboardArea" class="allDashboardAreas" style="display: flex;">
                    <div>
                        <div class="chartContainer">
                            <canvas id="studentsChart"></canvas>
                        </div>
                        <div class="chartContainer">
                            <canvas id="moneyChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <div class="chartContainer">
                            <div class="centerMe">
                                <p id="moneyEarned">Money Earned: $0</p>
                                <p id="studentsTutored">Students Tutored: 0</p>
                                <p id="hoursTutored">Hours Tutored: 0</p>
                            </div>
                        </div>
                        <div class="chartContainer">
                            <canvas id="hoursChart"></canvas>
                        </div>
                    </div>
                </div>
                <div id="addHoursDashboardArea" class="allDashboardAreas">
                    <form id="addHoursForm" class="adminForm" onsubmit="return addHours()">
                        <select id="classesDropdown" name="Class" required>
                            <option value="" disabled selected>Select class</option>
                        </select>
                        <select id="addHoursStudentsDropdown" name="Student" required>
                            <option value="" disabled selected>Select student</option>
                        </select>
                        <input id="startTimePicker" name="startTime" required type="time">
                        <input id="endTimePicker" name="endTime" required type="time">
                        <input id="dateTutored" name="Date" required type="date">
                        <textarea name="Notes" placeholder="Description" required type="text" maxlength="500" style="height: 150px; resize: none;"></textarea>
                        <div class="centerButton">
                            <button type="submit">Add Hours</button>
                        </div>
                    </form>
                </div>
                <div id="addTutorsDashboardArea" class="allDashboardAreas">
                    <form id="addTutorForm" class="adminForm" onsubmit="return addTutor()">
                        <input name="FirstName" placeholder="Tutor First Name" required type="text">
                        <input name="LastName" placeholder="Tutor Last Name" required type="text">
                        <input name="Email" placeholder="Tutor Email" required type="email">
                        <input name="Phone" placeholder="123-456-7890" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">
                        <input name="Percentage" placeholder="Tutor Percentage (Ex. 80 for 80%)" pattern="[0-9]+" required>
                        <div class="centerButton">
                            <button type="submit">Add Tutor</button>
                        </div>
                    </form>
                </div>
                <div id="addStudentsDashboardArea" class="allDashboardAreas">
                    <form id="addStudentForm" class="adminForm" onsubmit="return addStudent()">
                        <input name="FirstName" placeholder="Student First Name" required type="text">
                        <input name="LastName" placeholder="Student Last Name" required type="text">
                        <input name="Email" placeholder="Student Email" required type="email">
                        <input name="Price" placeholder="Student Rate (Ex. 50)" required pattern="[0-9]+" type="text">
                        <input id="birthday" name="Birthday" type="date" required>
                        <input name="PhoneNumber" placeholder="123-456-7890" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" type="tel">
                        <div class="centerButton">
                            <button type="submit">Add Student</button>
                        </div>
                    </form>
                </div>
                <div id="addClassesDashboardArea" class="allDashboardAreas">
                    <form id="addClassForm" class="adminForm" onsubmit="return addClass()">
                        <input name="Name" placeholder="Class Name" required type="text">
                        <select name="Level" placeholder="Class Level" required>
                            <option value="" disabled selected>Select class level</option>
                            <option value="preK">preK</option>
                            <option value="K-5">K-5</option>
                            <option value="6-8">6-8</option>
                            <option value="9-12">9-12</option>
                            <option value="Higher">Higher</option>
                        </select>
                        <div class="centerButton">
                            <button type="submit">Add Class</button>
                        </div>
                    </form>
                </div>
                <div id="allFinancesDashboardArea" class="allDashboardAreas">
                    <form id="allFinancesForm" class="adminForm" onsubmit="return getAllFinances()">
                        <select id="allFinancesTutorsDropdown" name="Tutor" required>
                            <option value="All Tutors" selected>All Tutors</option>
                        </select>
                        <input id="startDateRange" name="StartDateRange" type="date" required>
                        <input id="endDateRange" name="EndDateRange" type="date" required>
                        <div class="centerButton">
                            <button type="submit">Get finances</button>
                        </div>
                    </form>
                </div>
                <div id="getNotesDashboardArea" class="allDashboardAreas">
                    <div class="parentDivForTable">
                        <div>
                            <form id="getNotesForm" class="adminForm" onsubmit="return getNotes()">
                                <div class="flexParent">
                                    <select id="getNotesStudentsDropdown" name="Student" required class="inputSelectForNotes">
                                        <option value="" disabled selected>Select student</option>
                                    </select>
                                    <button type="submit" class="submitButtonForNotes">Get Notes</button>
                                </div>
                            </form>
                        </div>
                        <div class="notesTableDiv">
                            <div class="table-header">
                                <div class="col-1">Date</div>
                                <div class="col-2">Class Name</div>
                                <div class="col-3">Class Notes</div>
                            </div>
                            <div id="notesTable" class="notesTable"></div>
                        </div>
                    </div>
                </div>
                <div id="getCostDashboardArea" class="allDashboardAreas">
                    <form id="getCostForm" class="adminForm" onsubmit="return getCost()">
                        <select id="getCostStudentsDropdown" name="Student" required>
                            <option value="" disabled selected>Select student</option>
                        </select>
                        <input id="startDate" name="StartDate" required type="date">
                        <input id="endDate" name="EndDate" required type="date">
                        <div class="centerButton">
                            <button type="submit">Get Cost</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- <div id="titleBar">
                <div id="profilePic">
                    <img src="http://s3-us-west-2.amazonaws.com/s.cdpn.io/153917/profile/profile-512_1.jpg" />
                </div>
                <span onclick="filterNav(this)" class="controls activeControl">Daily</span>
                <span onclick="filterNav(this)" class="controls">Weekly</span>
                <span onclick="filterNav(this)" class="controls">Monthly</span>
            </div> -->
        </div>
    </body>

    <script>
        // Init stuff
        var tutorData = [];
        var timePeriod = "Week";
        var currentDashboard = "mainDashboardArea";
        var currentDashboardButton = "mainDashboardButton";
        
        // Charts
        var studentsChart = new Chart(document.getElementById("studentsChart").getContext("2d"),
        {
            type: "bar",
            data: {
            labels: ["", "", "", "", "", "", ""],
            datasets: 
            [
                {
                    data: [0, 0, 0, 0, 0, 0, 0],
                    backgroundColor:
                        // "rgba(255, 99, 132, 0.2)",
                        "rgba(54, 162, 235, 0.75)",
                        // "rgba(255, 206, 86, 0.2)",
                        // "rgba(75, 192, 192, 0.2)",
                        // "rgba(153, 102, 255, 0.2)",
                        // "rgba(255, 159, 64, 0.2)",
                        // "rgba(255, 99, 132, 0.2)"
                },
            ]
            },
            options: 
            {
                title: {
                    display: true,
                    text: "Students Tutored This " + timePeriod,
                },
                legend: {
                    display: false
                },
                scales: {
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true,
                            stepSize: 1,
                        }
                    }]
                }
            }
        });
        
        var moneyChart = new Chart(document.getElementById("moneyChart").getContext("2d"), {
            type: "bar",
            data: {
            labels: ["", "", "", "", "", "", ""],
            datasets: 
            [
                {
                    data: [0, 0, 0, 0, 0, 0, 0],
                    backgroundColor: 
                        // "rgba(255, 99, 132, 0.2)",
                        // "rgba(54, 162, 235, 0.2)",
                        "rgba(255, 206, 86, .75)",
                        // "rgba(75, 192, 192, 0.2)",
                        // "rgba(153, 102, 255, 0.2)",
                        // "rgba(255, 159, 64, 0.2)",
                        // "rgba(255, 99, 132, 0.2)"
                },
            ]
            },
            options: {
                title: {
                    display: true,
                    text: "Money Earned This " + timePeriod
                },
                legend: {
                    display: false
                },
                scales: {
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true   // minimum value will be 0.
                        }
                    }]
                }
            }
        });
       
        var hoursChart = new Chart(document.getElementById("hoursChart").getContext("2d"), {
            type: "bar",
            data: {
            labels: ["", "", "", "", "", "", ""],
            datasets: 
            [
                {
                    data: [0, 0, 0, 0, 0, 0, 0],
                    backgroundColor: 
                        // "rgba(255, 99, 132, 0.2)",
                        // "rgba(54, 162, 235, 0.2)",
                        // "rgba(255, 206, 86, .75)",
                        // "rgba(75, 192, 192, 0.2)",
                        // "rgba(153, 102, 255, 0.2)",
                        // "rgba(255, 159, 64, 0.2)",
                        "rgba(255, 99, 132, 0.75)"
                },
            ]
            },
            options: {
                title: {
                    display: true,
                    text: "Hours Tutored This " + timePeriod
                },
                legend: {
                    display: false
                },
                scales: {
                    yAxes: [{
                        display: true,
                        ticks: {
                            beginAtZero: true,
                            stepSize: .5,
                        }
                    }]
                }
            }
        });
          
        // Get stuff to show
        getStudents();
        getClasses();
        getTutors();
        getDashboard();
        
        // Submit action for add tutor form
        function addTutor()
        {
            // Get inputs
            var inputs = document.getElementById("addTutorForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addTutor", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    tInfo = JSON.parse(this.responseText);
                    tInfo = tInfo[0];
                    document.getElementById("allFinancesTutorsDropdown").options.add(new Option(`${tInfo["FirstName"]} ${tInfo["LastName"]} (${tInfo["Email"]})`, JSON.stringify(tInfo)));
                    alert("Tutor added successfully!");
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for add student form
        function addStudent()
        {
            // Get inputs
            var inputs = document.getElementById("addStudentForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addStudent", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    sInfo = JSON.parse(this.responseText);
                    sInfo = sInfo[0];
                    document.getElementById("addHoursStudentsDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                    document.getElementById("getNotesStudentsDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                    document.getElementById("getCostStudentsDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                    alert("Student added successfully!");
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for add class form
        function addClass()
        {
            // Get inputs
            var inputs = document.getElementById("addClassForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addClass", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    cInfo = JSON.parse(this.responseText);
                    cInfo = cInfo[0];
                    document.getElementById("classesDropdown").options.add(new Option(cInfo["Name"] + " (" + cInfo["Level"] + ")", JSON.stringify(cInfo)));
                    alert("Class added successfully!");
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for add hours form
        function addHours()
        {
            // Get inputs
            var inputs = document.getElementById("addHoursForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "addHours", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    alert(this.responseText);
                    getDashboard();
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };
        
        // Submit action for get all finances form
        function getAllFinances()
        {
            // Get inputs
            var inputs = document.getElementById("allFinancesForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getAllFinances", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    alert(this.responseText);
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for get notes form
        function getNotes()
        {
            // Get inputs
            var inputs = document.getElementById("getNotesForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getNotes", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    document.getElementById("notesTable").innerHTML = "";
                    var hours = JSON.parse(this.responseText);
                    for (let i = 0; i < hours.length; i++)
                    {
                        var classDate = new Date(hours[i]["Date"]);
                        var htmlToAdd = 
                        `<div class="table-row">
                            <div class="col-1">${classDate.toDateString()}</div>
                            <div class="col-2">${hours[i]["Name"] + " " + hours[i]["Level"]}</div>
                            <div class="col-3">${hours[i]["Notes"]}</div>
                        </div>`;
                        document.getElementById("notesTable").innerHTML += htmlToAdd;
                    }
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Submit action for get notes form
        function getCost()
        {
            // Get inputs
            var inputs = document.getElementById("getCostForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getCost", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    alert(this.responseText);
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };
        
        // Submit action for update profile form
        function updateProfile()
        {
            // Get inputs
            var inputs = document.getElementById("updateUserProfileForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "updateUserInfo", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    tutorData = JSON.parse(this.responseText);
                    alert("SUCCESS! Profile has been updated.")
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };
        
        // Submit action for update password form
        function updatePassword()
        {
            // Get inputs
            var inputs = document.getElementById("updatePasswordForm").elements;
            var inputsAsArray = {};
            for(var i = 0; i < inputs.length - 1; i++)
            {
                var item = inputs.item(i);
                inputsAsArray[item.name] = item.value.trim();
            }

            // Add tutor data
            inputsAsArray["Tutor"] = JSON.stringify(tutorData);

            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "updatePassword", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    alert(this.responseText);
                }
                else
                {
                    alert(this.responseText);
                }
            };
            request.send(JSON.stringify(inputsAsArray));
            return false;
        };

        // Show tutor data in profile
        function setUserProfile()
        {
            document.getElementById("userProfileFirstName").value = tutorData["FirstName"];
            document.getElementById("userProfileLastName").value = tutorData["LastName"];
            document.getElementById("userProfileEmail").value = tutorData["Email"];
            document.getElementById("userProfilePhone").value = tutorData["PhoneNumber"];
        }
        
        // Get from server to populate select inputs
        function getTutors()
        {
            request = new XMLHttpRequest();
            request.open("POST", "getTutors", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    tutorsInfo = JSON.parse(this.responseText);
                    for (let i = 0; i < tutorsInfo.length; i++)
                    {
                        tInfo = tutorsInfo[i];
                        document.getElementById("allFinancesTutorsDropdown").options.add(new Option(`${tInfo["FirstName"]} ${tInfo["LastName"]} (${tInfo["Email"]})`, JSON.stringify(tInfo)));
                    }
                }
            };
            request.send(JSON.stringify());
        }

        // Get from server to populate select inputs
        function getStudents()
        {
            request = new XMLHttpRequest();
            request.open("POST", "getStudents", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    studentsInfo = JSON.parse(this.responseText);
                    for (let i = 0; i < studentsInfo.length; i++)
                    {
                        sInfo = studentsInfo[i];
                        document.getElementById("addHoursStudentsDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                        document.getElementById("getNotesStudentsDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                        document.getElementById("getCostStudentsDropdown").options.add(new Option(`${sInfo["FirstName"]} ${sInfo["LastName"]} (${sInfo["Email"]})`, JSON.stringify(sInfo)));
                    }
                }
            };
            request.send(JSON.stringify());
        }

        // Get from server to populate select inputs
        function getClasses()
        {
            request = new XMLHttpRequest();
            request.open("POST", "getClasses", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    classesInfo = JSON.parse(this.responseText);
                    for (let i = 0; i < classesInfo.length; i++)
                    {
                        cInfo = classesInfo[i];
                        document.getElementById("classesDropdown").options.add(new Option(cInfo["Name"] + " (" + cInfo["Level"] + ")", JSON.stringify(cInfo)));
                    }
                }
            };
            request.send(JSON.stringify());
        }

        // Get dashboard stats
        function getDashboard()
        {
            // Send to server
            request = new XMLHttpRequest();
            request.open("POST", "getDashboard", false);
            request.setRequestHeader('Content-type', 'application/json');
            request.onreadystatechange = function()
            {
                // Successful response
                if (this.readyState == 4 && this.status == 200) 
                {
                    // Parse output json
                    var outputsArray = JSON.parse(this.responseText);

                    // Update dashboard elements
                    document.getElementById("moneyEarned").innerHTML = `Money Earned: $${outputsArray["totalMoneyGenerated"]}`;
                    document.getElementById("studentsTutored").innerHTML = `Students Tutored: ${outputsArray["totalStudentsTutored"]}`;
                    document.getElementById("hoursTutored").innerHTML = `Hours Tutored: ${outputsArray["totalHoursTutored"]}`;

                    studentsChart.data.datasets[0].data = outputsArray["studentsTutoredList"];
                    moneyChart.data.datasets[0].data = outputsArray["moneyGeneratedList"];
                    hoursChart.data.datasets[0].data = outputsArray["hoursTutoredList"];
                    studentsChart.data.labels = outputsArray["datesList"];
                    hoursChart.data.labels = outputsArray["datesList"];
                    moneyChart.data.labels = outputsArray["datesList"];
                    studentsChart.update();
                    hoursChart.update();
                    moneyChart.update();
                }
            };
            request.send(JSON.stringify({"TimePeriod": timePeriod, "Tutor": tutorData}));
            return false;
        };
        
        // Function to run when menu item is clicked
        function menuNav(dashboardName, elementToMakeActive)
        {
            // Deselect old and select current
            document.getElementById(currentDashboardButton).className = "menuItem";
            if (elementToMakeActive != "none")
            {
                currentDashboardButton = elementToMakeActive;
                document.getElementById(elementToMakeActive).className = ("menuItem activeMenu");
            }

            // Hide old dashboard show new and adjust current dashboard var accordingly
            document.getElementById(currentDashboard).style.display = "none";
            document.getElementById(dashboardName).style.display = "flex";
            currentDashboard = dashboardName;
        }
        
        // Function to run when filter item is clicked
        function filterNav(item)
        {
            // Check if item can be clicked
            if (item.className != "controls activeControl")
            {
                alert(item.textContent);
            }
        }
    </script>
</html>